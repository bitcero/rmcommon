function show_module_info(a){$("body").append('<div id="mod-info-blocker"></div>'),$("#mod-info-blocker").fadeIn("fast"),$("body").append('<div id="mod-info-data"></div>'),$("#mod-info-data").html($("#mod-"+a).html()).fadeIn("fast"),$("body").css("overflow","hidden")}function closeInfo(a){$("#mod-info-data").fadeOut("fast",function(){$("#mod-info-blocker").fadeOut("fast",function(){$(this).remove(),$("body").css("overflow","auto")}),$(this).remove()})}function load_page(a){$("#img-load").show("slow"),$("#mods-widget-container").slideUp("slow",function(){var e={action:"load_page",page:a,token:$("#token").val()};$.post("modules.php",e,function(a){$("#mods-widget-container").html(a),$("#img-load").hide("fast"),$("#mods-widget-container").slideDown("slow")},"html")})}$(document).ready(function(){$(".mod_preinstall_container .th a").click(function(){var a=$(this).attr("id").replace("down-","");$("#"+a+"-container").slideToggle(600)}),$("#install-ok").click(function(){$("#install-form").submit()}),$("a.uninstall_button").click(function(){var a=$(this).data("dir");if("system"!=a&&confirm(message))return $("#mod-action").val("uninstall_module"),$("#mod-dir").val(a),$("#form-modules").submit(),!1}),$("a.update_button").click(function(){var a=$(this).parent().parent().parent().attr("id").replace("module-","");confirm(message_upd)&&($("#mod-action").val("update_module"),$("#mod-dir").val(a),$("#form-modules").submit())}),$("a.disable_button").click(function(){var a=$(this).parent().parent().parent().attr("id").replace("module-","");confirm(message_dis)&&($("#mod-action").val("disable_module"),$("#mod-dir").val(a),$("#form-modules").submit())}),$("a.enable_button").click(function(){var a=$(this).parent().parent().parent().attr("id").replace("module-","");$("#mod-action").val("enable_module"),$("#mod-dir").val(a),$("#form-modules").submit()}),$("a.data_button").click(function(){var a=$(this).parents("tr").attr("id"),e="#"+a+" .hidden_data";$("#info-module .header img").attr("src",$(e+" .image").html()),$("#info-module .header h3").html($(e+" .oname").html()),$("#info-module .header .desc").html($("#"+a+" .name .descriptions").html()),$("#info-module .version").html($(e+" .version").html()),$("#info-module .dirname").html($(e+" .dirname").html());var t="";t=""!=$(e+" .mail").html()?'<a href="'+$(e+" .author-url").html()+'">'+$(e+" .author").html()+"</a>":$(e+" .author").html(),""!=t&&$("#info-module .author").html(t);var n="";""!=$(e+" .url").html()&&(n='<a href="'+$(e+" .url").html()+'" target="_blank">'+cuLanguage.visitWeb+"</a>",$("#info-module .web").html(n)),$("#info-module .license").html($(e+" .license").html()),""!=$(e+" .help").html()&&$("#info-module .help").html('<a href="'+$(e+" .help").html()+'" target="_blank" class="cu-help-button">'+$(e+" .oname").html()+"</a>"),$("#info-module .social").html($(e+" .social").html());var o=$("#info-module");return o.detach(),$("body").append(o),o.modal(),!1}),$("#info-blocker, .info_close").click(function(){$("#info-module").fadeOut("fast",function(){$("#info-blocker").fadeOut("fast")})}),$("a.rename").click(function(){var a=$(this).parent().parent(),e=a.attr("id");return $(this).fadeOut("fast"),$("#"+a.attr("id")+" .the_name").fadeOut("fast",function(){var t='<span class="renamer"><input type="text" name="newname" value="'+$("#"+e+" .hidden_data .name").html()+'" class="form-control newname" />';t+='<a href="#" class="cancelnewname" onclick="cancel_rename(\''+e+"');\"><span>Cancel</span></a>",t+='<a href="#" class="savenewname"><span>Save</span></a></span>',$("#"+a.attr("id")+" .the_name").html(t),$("#"+a.attr("id")+" .the_name").fadeIn("fast")}),!1}),$(".the_name").on("click",".cancelnewname",function(){var a=$(this).parent().parent().parent().parent().attr("id"),e=$(this).parent();e.fadeOut("fast",function(){var e=$("#"+a+" td.name .the_name");e.fadeOut("fast"),""!=$("#"+a+" .hidden_data .adminlink").html()&&e.html('<a href="'+$("#"+a+" .hidden_data .adminlink").html()+'">'+$("#"+a+" .hidden_data .name").html()+"</a>"),e.fadeIn("fast",function(){$("#"+a+" .rename").fadeIn("fast")})})}),$(".the_name").on("click",".savenewname",function(){var a=$(this).parent().parent().parent().parent().attr("id"),e=$("#"+a+" .hidden_data .id").html(),t=$("#"+a+" .renamer .newname").val(),n=$(this).parent();return""==t.replace(/^\s*|\s*$/g,"")?(alert(message_wname),$("#"+a+" .renamer .newname").focus(),!1):t==$("#"+a+" .hidden_data .name").html()?(alert(message_name),$("#"+a+" .renamer .newname").focus(),!1):(params={name:t,id:e,action:"savename",XOOPS_TOKEN_REQUEST:$("#XOOPS_TOKEN_REQUEST").val()},void $.post("modules.php",params,function(e){e.error?(alert(e.message),e.token||window.location.reload()):n.fadeOut("fast",function(){var e=$("#"+a+" td.name .the_name");e.fadeOut("fast"),$("#"+a+" .hidden_data .name").html(params.name),e.html(""!=$("#"+a+" .hidden_data .adminlink").html()&&"1"==$("#"+a+" .hidden_data .active").html()?'<a href="'+$("#"+a+" .hidden_data .adminlink").html()+'">'+$("#"+a+" .hidden_data .name").html()+"</a>":$("#"+a+" .hidden_data .name").html()),e.fadeIn("fast",function(){$("#"+a+" .rename").fadeIn("fast"),$("#"+a+" td").effect("highlight",{},1e3)})}),e.token&&$("#XOOPS_TOKEN_REQUEST").val(e.token)},"json"))})});
