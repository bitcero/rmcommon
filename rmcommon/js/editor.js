var switchEditors={mode:"",I:function(e){return document.getElementById(e)},edInit:function(){tinymce.util.Cookie.getHash("TinyMCE_content_size"),this.I("edButtonHTML"),this.I("edButtonPreview");try{this.I("quicktags").style.display="none"}catch(e){}tinymce.execCommand("mceAddControl",!1,"content")},saveCallback:function(e,t){return t=tinymce.activeEditor.isHidden()?this.I(e).value:this.pre_esautop(t)},pre_esautop:function(e){e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return e=e.replace(/<br ?\/?>[\r\n]*/g,"<es_temp>"),e.replace(/<\/?p( [^>]*)?>[\r\n]*/g,"<es_temp>")});var t="blockquote|ul|ol|li|table|thead|tbody|tr|th|td|div|h[1-6]|p";e=e.replace(new RegExp("\\s*</("+t+")>\\s*","mg"),"</$1>\n"),e=e.replace(new RegExp("\\s*<(("+t+")[^>]*)>","mg"),"\n<$1>"),e=e.replace(new RegExp("(<p [^>]+>.*?)</p>","mg"),"$1</p#>"),e=e.replace(new RegExp("<div([^>]*)>\\s*<p>","mgi"),"<div$1>\n\n"),e=e.replace(new RegExp("\\s*<p>","mgi"),""),e=e.replace(new RegExp("\\s*</p>\\s*","mgi"),"\n\n"),e=e.replace(new RegExp("\\n\\s*\\n","mgi"),"\n\n"),e=e.replace(new RegExp("\\s*<br ?/?>\\s*","gi"),"\n"),e=e.replace(new RegExp("\\s*<div","mg"),"\n<div"),e=e.replace(new RegExp("</div>\\s*","mg"),"</div>\n"),e=e.replace(new RegExp("\\s*\\[caption([^\\[]+)\\[/caption\\]\\s*","gi"),"\n\n[caption$1[/caption]\n\n"),e=e.replace(new RegExp("caption\\]\\n\\n+\\[caption","g"),"caption]\n\n[caption");var n="blockquote|ul|ol|li|table|thead|tr|th|td|h[1-6]|pre";return e=e.replace(new RegExp("\\s*<(("+n+") ?[^>]*)\\s*>","mg"),"\n<$1>"),e=e.replace(new RegExp("\\s*</("+n+")>\\s*","mg"),"</$1>\n"),e=e.replace(new RegExp("<li([^>]*)>","g"),"\t<li$1>"),e.indexOf("<object")!=-1&&(e=e.replace(new RegExp("\\s*<param([^>]*)>\\s*","mg"),"<param$1>"),e=e.replace(new RegExp("\\s*</embed>\\s*","mg"),"</embed>")),e=e.replace(new RegExp("</p#>","g"),"</p>\n"),e=e.replace(new RegExp("\\s*(<p [^>]+>.*</p>)","mg"),"\n$1"),e=e.replace(new RegExp("^\\s*",""),""),e=e.replace(new RegExp("[\\s\\u00a0]*$",""),""),e=e.replace(/<es_temp>/g,"\n")},go:function(e,t){e=e||"content",e=e.replace("#",""),t=t||this.mode||"tinymce";var n=tinymce.get(e)||!1,i=$("#ed-cont-"+e+" .quicktags"),a=$("#ed-cont-"+e+" .edButtonHTML"),r=$("#ed-cont-"+e+" .edButtonPreview"),o=$("#"+e);if("tinymce"==t){if(n&&!n.isHidden())return!1;this.mode="html",o.css("color","#fff"),r.addClass("active"),a.removeClass("active"),edCloseAllTags(e),i.hide().parent().removeClass("showing"),o.val(this.esautop(o.val())),n?n.show():tinymce.execCommand("mceAddControl",!1,e),$.cookie("editor","tinymce")}else{if(!n||n.isHidden())return!1;this.mode="tinymce",a.addClass("active"),r.removeClass("active"),o.css("height",n.getContentAreaContainer().offsetHeight+6+"px"),n.hide(),i.css("display","block").parent().addClass("showing"),o.css("color",""),$.cookie("editor","html")}return!1},esautop:function(e){var t="table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|p|h[1-6]";return e+="\n\n",e=e.replace(new RegExp("<br />\\s*<br />","gi"),"\n\n"),e=e.replace(new RegExp("(<(?:"+t+")[^>]*>)","gi"),"\n$1"),e=e.replace(new RegExp("(</(?:"+t+")>)","gi"),"$1\n\n"),e=e.replace(new RegExp("\\r\\n|\\r","g"),"\n"),e=e.replace(new RegExp("\\n\\s*\\n+","g"),"\n\n"),e=e.replace(new RegExp("([\\s\\S]+?)\\n\\n","mg"),"<p>$1</p>\n"),e=e.replace(new RegExp("<p>\\s*?</p>","gi"),""),e=e.replace(new RegExp("<p>\\s*(</?(?:"+t+")[^>]*>)\\s*</p>","gi"),"$1"),e=e.replace(new RegExp("<p>(<li.+?)</p>","gi"),"$1"),e=e.replace(new RegExp("<p>\\s*<blockquote([^>]*)>","gi"),"<blockquote$1><p>"),e=e.replace(new RegExp("</blockquote>\\s*</p>","gi"),"</p></blockquote>"),e=e.replace(new RegExp("<p>\\s*(</?(?:"+t+")[^>]*>)","gi"),"$1"),e=e.replace(new RegExp("(</?(?:"+t+")[^>]*>)\\s*</p>","gi"),"$1"),e=e.replace(new RegExp("\\s*\\n","gi"),"<br />\n"),e=e.replace(new RegExp("(</?(?:"+t+")[^>]*>)\\s*<br />","gi"),"$1"),e=e.replace(new RegExp("<br />(\\s*</?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)","gi"),"$1"),e=e.replace(new RegExp("(?:<p>|<br ?/?>)*\\s*\\[caption([^\\[]+)\\[/caption\\]\\s*(?:</p>|<br ?/?>)*","gi"),"[caption$1[/caption]"),e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return e=e.replace(/<br ?\/?>[\r\n]*/g,"\n"),e.replace(/<\/?p( [^>]*)?>[\r\n]*/g,"\n")})}};