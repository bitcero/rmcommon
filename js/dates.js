var exmDates=jQuery.extend({init:function(){},mktime:function(){var e=new Date,t=arguments,n=0,r=["Hours","Minutes","Seconds","Month","Date","FullYear"];for(n=0;n<r.length;n++)if("undefined"==typeof t[n])t[n]=e["get"+r[n]](),t[n]+=3===n;else if(t[n]=parseInt(t[n],10),isNaN(t[n]))return!1;return t[5]+=t[5]>=0?t[5]<=69?2e3:t[5]<=100?1900:0:0,e.setFullYear(t[5],t[3]-1,t[4]),e.setHours(t[0],t[1],t[2]),(e.getTime()/1e3>>0)-(e.getTime()<0)},date:function(e,t){var n=this,r,u,i=/\\?([a-z])/gi,a,o=function(e,t){return(e+="").length<t?new Array(++t-e.length).join("0")+e:e},c=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],f={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"};return a=function(e,t){return u[e]?u[e]():t},u={d:function(){return o(u.j(),2)},D:function(){return u.l().slice(0,3)},j:function(){return r.getDate()},l:function(){return c[u.w()]+"day"},N:function(){return u.w()||7},S:function(){return f[u.j()]||"th"},w:function(){return r.getDay()},z:function(){var e=new Date(u.Y(),u.n()-1,u.j()),t=new Date(u.Y(),0,1);return Math.round((e-t)/864e5)+1},W:function(){var e=new Date(u.Y(),u.n()-1,u.j()-u.N()+3),t=new Date(e.getFullYear(),0,4);return 1+Math.round((e-t)/864e5/7)},F:function(){return c[6+u.n()]},m:function(){return o(u.n(),2)},M:function(){return u.F().slice(0,3)},n:function(){return r.getMonth()+1},t:function(){return new Date(u.Y(),u.n(),0).getDate()},L:function(){return 1===new Date(u.Y(),1,29).getMonth()|0},o:function(){var e=u.n(),t=u.W(),n=u.Y();return n+(12===e&&9>t?-1:1===e&&t>9)},Y:function(){return r.getFullYear()},y:function(){return(u.Y()+"").slice(-2)},a:function(){return r.getHours()>11?"pm":"am"},A:function(){return u.a().toUpperCase()},B:function(){var e=3600*r.getUTCHours(),t=60*r.getUTCMinutes(),n=r.getUTCSeconds();return o(Math.floor((e+t+n+3600)/86.4)%1e3,3)},g:function(){return u.G()%12||12},G:function(){return r.getHours()},h:function(){return o(u.g(),2)},H:function(){return o(u.G(),2)},i:function(){return o(r.getMinutes(),2)},s:function(){return o(r.getSeconds(),2)},u:function(){return o(1e3*r.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var e=new Date(u.Y(),0),t=Date.UTC(u.Y(),0),n=new Date(u.Y(),6),r=Date.UTC(u.Y(),6);return 0+(e-t!==n-r)},O:function(){var e=r.getTimezoneOffset();return(e>0?"-":"+")+o(Math.abs(e/60*100),4)},P:function(){var e=u.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-r.getTimezoneOffset()},c:function(){return"Y-m-d\\Th:i:sP".replace(i,a)},r:function(){return"D, d M Y H:i:s O".replace(i,a)},U:function(){return r.getTime()/1e3|0}},this.date=function(e,t){return n=this,r="undefined"==typeof t?new Date:new Date(t instanceof Date?t:1e3*t),e.replace(i,a)},this.date(e,t)}});$(document).ready(function(){exmDates.init(),$("input.exmdates_field").change(function(){var str=$(this).val().split(" ",3),date=str[0].split("/",3);if(str.length>1)var time=str[1].split(":",3);field=$(this).attr("id").replace("exmdate-",""),eval("var convert = "+field+"_time==2?false:true;"),convert?(valtime=void 0!=time&&time.length>0?exmDates.mktime(time[0]-7,time[1],time[2]>=0?time[2]:1,date[0],date[1],date[2]):exmDates.mktime(1,1,1,date[0],date[1],date[2]),$("#"+field).val(valtime)):$("#"+field).val($(this).val())})});
