var jkmegamenu={effectduration:300,delaytimer:200,megamenulabels:[],megamenus:[],zIndexVal:1e3,$shimobj:null,addshim:function(e){e(document.body).append('<IFRAME id="outlineiframeshim" src="'+("https:"==location.protocol?"blank.htm":"about:blank")+'" style="display:none; left:0; top:0; z-index:999; position:absolute; filter:progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)" frameBorder="0" scrolling="no"></IFRAME>'),this.$shimobj=e("#outlineiframeshim")},alignmenu:function(e,t,n){var i=this.megamenus[n],o=i.$anchorobj,a=i.$menuobj,m=e(window).width()-(i.offsetx-e(document).scrollLeft())>i.actualwidth?i.offsetx:i.offsetx-i.actualwidth+i.anchorwidth,s=i.offsety+i.anchorheight;a.css({left:m+"px",top:s+"px"}),this.$shimobj.css({width:i.actualwidth+"px",height:i.actualheight+"px",left:m+"px",top:s+"px",display:"block"})},showmenu:function(e,t){var n=this.megamenus[t],i=n.$menuobj,o=n.$menuinner;return"none"==i.css("display")?(this.alignmenu(jQuery,e,t),i.css("z-index",++this.zIndexVal),i.slideDown(this.effectduration,function(){o.css("visibility","visible")})):"block"==i.css("display")&&"click"==e.type&&this.hidemenu(e,t),!1},hidemenu:function(e,t){var n=this.megamenus[t],i=n.$menuobj,o=n.$menuinner;o.css("visibility","hidden"),this.$shimobj.css({display:"none",left:0,top:0}),i.slideUp(this.effectduration)},definemenu:function(e,t,n){this.megamenulabels.push([e,t,n])},render:function(e){for(var t=0,n=this.megamenulabels[t];t<this.megamenulabels.length;t++,n=this.megamenulabels[t]){if(1!=e("#"+n[0]).length||1!=e("#"+n[1]).length)return;this.megamenus.push({$anchorobj:e("#"+n[0]),$menuobj:e("#"+n[1]),$menuinner:e("#"+n[1]).children("ul:first-child"),revealtype:n[2],hidetimer:null});var i=this.megamenus[t];i.$anchorobj.add(i.$menuobj).attr("_megamenupos",t+"pos"),i.actualwidth=i.$menuobj.outerWidth(),i.actualheight=i.$menuobj.outerHeight(),i.offsetx=i.$anchorobj.offset().left,i.offsety=i.$anchorobj.offset().top,i.anchorwidth=i.$anchorobj.outerWidth(),i.anchorheight=i.$anchorobj.outerHeight(),e(document.body).append(i.$menuobj),i.$menuobj.css("z-index",++this.zIndexVal).hide(),i.$menuinner.css("visibility","hidden"),i.$anchorobj.bind("click"==i.revealtype?"click":"mouseenter",function(e){var t=jkmegamenu.megamenus[parseInt(this.getAttribute("_megamenupos"))];return clearTimeout(t.hidetimer),jkmegamenu.showmenu(e,parseInt(this.getAttribute("_megamenupos")))}),i.$anchorobj.bind("mouseleave",function(t){var n=jkmegamenu.megamenus[parseInt(this.getAttribute("_megamenupos"))];t.relatedTarget!=n.$menuobj.get(0)&&0==e(t.relatedTarget).parents("#"+n.$menuobj.get(0).id).length&&(n.hidetimer=setTimeout(function(){jkmegamenu.hidemenu(t,parseInt(n.$menuobj.get(0).getAttribute("_megamenupos")))},jkmegamenu.delaytimer))}),i.$menuobj.bind("mouseenter",function(e){var t=jkmegamenu.megamenus[parseInt(this.getAttribute("_megamenupos"))];clearTimeout(t.hidetimer)}),i.$menuobj.bind("click mouseleave",function(e){var t=jkmegamenu.megamenus[parseInt(this.getAttribute("_megamenupos"))];t.hidetimer=setTimeout(function(){jkmegamenu.hidemenu(e,parseInt(t.$menuobj.get(0).getAttribute("_megamenupos")))},jkmegamenu.delaytimer)})}/Safari/i.test(navigator.userAgent)?e(window).bind("resize load",function(){for(var e=0;e<jkmegamenu.megamenus.length;e++){var t=jkmegamenu.megamenus[e],n=1==t.$anchorobj.children().length&&t.$anchorobj.children().eq(0).is("img")?t.$anchorobj.children().eq(0):null;n&&(t.offsetx=n.offset().left,t.offsety=n.offset().top,t.anchorwidth=n.width(),t.anchorheight=n.height())}}):e(window).bind("resize",function(){for(var e=0;e<jkmegamenu.megamenus.length;e++){var t=jkmegamenu.megamenus[e];t.offsetx=t.$anchorobj.offset().left,t.offsety=t.$anchorobj.offset().top}}),jkmegamenu.addshim(e)}};jQuery(document).ready(function(e){jkmegamenu.render(e)});
