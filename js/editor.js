var switchEditors={mode:"",I:function(e){return document.getElementById(e)},edInit:function(){$.cookie("editor"),this.I("edButtonHTML"),this.I("edButtonPreview");try{this.I("quicktags").style.display="none"}catch(e){}tinymce.execCommand("mceAddControl",!1,"content")},saveCallback:function(e,n){return n=tinymce.activeEditor.isHidden()?this.I(e).value:this.pre_esautop(n)},pre_esautop:function(e){var n="blockquote|ul|ol|li|table|thead|tbody|tr|th|td|div|h[1-6]|p",p="blockquote|ul|ol|li|table|thead|tr|th|td|h[1-6]|pre";return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return(e=e.replace(/<br ?\/?>[\r\n]*/g,"<es_temp>")).replace(/<\/?p( [^>]*)?>[\r\n]*/g,"<es_temp>")})).replace(new RegExp("\\s*</("+n+")>\\s*","mg"),"</$1>\n")).replace(new RegExp("\\s*<(("+n+")[^>]*)>","mg"),"\n<$1>")).replace(new RegExp("(<p [^>]+>.*?)</p>","mg"),"$1</p#>")).replace(new RegExp("<div([^>]*)>\\s*<p>","mgi"),"<div$1>\n\n")).replace(new RegExp("\\s*<p>","mgi"),"")).replace(new RegExp("\\s*</p>\\s*","mgi"),"\n\n")).replace(new RegExp("\\n\\s*\\n","mgi"),"\n\n")).replace(new RegExp("\\s*<br ?/?>\\s*","gi"),"\n")).replace(new RegExp("\\s*<div","mg"),"\n<div")).replace(new RegExp("</div>\\s*","mg"),"</div>\n")).replace(new RegExp("\\s*\\[caption([^\\[]+)\\[/caption\\]\\s*","gi"),"\n\n[caption$1[/caption]\n\n")).replace(new RegExp("caption\\]\\n\\n+\\[caption","g"),"caption]\n\n[caption")).replace(new RegExp("\\s*<(("+p+") ?[^>]*)\\s*>","mg"),"\n<$1>"),e=e.replace(new RegExp("\\s*</("+p+")>\\s*","mg"),"</$1>\n"),-1!=(e=e.replace(new RegExp("<li([^>]*)>","g"),"\t<li$1>")).indexOf("<object")&&(e=(e=e.replace(new RegExp("\\s*<param([^>]*)>\\s*","mg"),"<param$1>")).replace(new RegExp("\\s*</embed>\\s*","mg"),"</embed>")),e=e.replace(new RegExp("</p#>","g"),"</p>\n"),e=e.replace(new RegExp("\\s*(<p [^>]+>.*</p>)","mg"),"\n$1"),e=e.replace(new RegExp("^\\s*",""),""),e=e.replace(new RegExp("[\\s\\u00a0]*$",""),""),e=e.replace(/<es_temp>/g,"\n")},go:function(e,n){e=(e=e||"content").replace("#",""),n=n||this.mode||"tinymce";var p=tinymce.get(e)||!1,t=$("#ed-cont-"+e+" .quicktags"),r=$("#ed-cont-"+e+" .edButtonHTML"),c=$("#ed-cont-"+e+" .edButtonPreview"),i=$("#"+e);if("tinymce"==n){if(p&&!p.isHidden())return!1;this.mode="html",i.css("color","#fff"),c.addClass("active"),r.removeClass("active"),edCloseAllTags(e),t.hide().parent().removeClass("showing"),p?p.show():tinymce.execCommand("mceAddControl",!1,e),$.cookie("editor","tinymce")}else{if(!p||p.isHidden())return!1;this.mode="tinymce",r.addClass("active"),c.removeClass("active"),i.css("height",p.getContentAreaContainer().offsetHeight+6+"px"),$(i).removeAttr("aria-hidden"),p.hide(),t.css("display","block").parent().addClass("showing"),i.css("color",""),$.cookie("editor","html")}return!1},esautop:function(e){var n="table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|p|h[1-6]";return e+="\n\n",e=e.replace(new RegExp("<br />\\s*<br />","gi"),"\n\n"),e=e.replace(new RegExp("(<(?:"+n+")[^>]*>)","gi"),"\n$1"),e=e.replace(new RegExp("(</(?:"+n+")>)","gi"),"$1\n\n"),e=e.replace(new RegExp("\\r\\n|\\r","g"),"\n"),e=e.replace(new RegExp("\\n\\s*\\n+","g"),"\n\n"),e=e.replace(new RegExp("([\\s\\S]+?)\\n\\n","mg"),"<p>$1</p>\n"),e=e.replace(new RegExp("<p>\\s*?</p>","gi"),""),e=e.replace(new RegExp("<p>\\s*(</?(?:"+n+")[^>]*>)\\s*</p>","gi"),"$1"),e=e.replace(new RegExp("<p>(<li.+?)</p>","gi"),"$1"),e=e.replace(new RegExp("<p>\\s*<blockquote([^>]*)>","gi"),"<blockquote$1><p>"),e=e.replace(new RegExp("</blockquote>\\s*</p>","gi"),"</p></blockquote>"),e=e.replace(new RegExp("<p>\\s*(</?(?:"+n+")[^>]*>)","gi"),"$1"),e=e.replace(new RegExp("(</?(?:"+n+")[^>]*>)\\s*</p>","gi"),"$1"),e=e.replace(new RegExp("\\s*\\n","gi"),"<br />\n"),e=e.replace(new RegExp("(</?(?:"+n+")[^>]*>)\\s*<br />","gi"),"$1"),e=e.replace(new RegExp("<br />(\\s*</?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)","gi"),"$1"),e=e.replace(new RegExp("(?:<p>|<br ?/?>)*\\s*\\[caption([^\\[]+)\\[/caption\\]\\s*(?:</p>|<br ?/?>)*","gi"),"[caption$1[/caption]"),e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return(e=e.replace(/<br ?\/?>[\r\n]*/g,"\n")).replace(/<\/?p( [^>]*)?>[\r\n]*/g,"\n")})}};