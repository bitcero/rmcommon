function sum(t){return foldl(t,0,function(t,r){return t+r})}function foldl(t,r,n){for(var e=0;e<t.length;e++)r=n(r,t[e]);return r}window.jGCharts||(jGCharts={}),jGCharts.Api=function(){function t(t,r){for(var n=[],e=0;e<t.length;e++){var i=t[e];n.push(!isNaN(i)&&i>=0?ur.charAt(Math.round((ur.length-1)*i/r)):"_")}return n.join("")}function r(){var t=ir;return or&&(t+=","+or),t}function n(){if(!M.constructor==Array)throw new Error("Legend must be Array");for(var t="",r=0;r<M.length;r++)t+=M[r]+"|";return t=x(t,"|")}function e(){if(!L.constructor==Array)throw new Error("Data must be Array");for(var r="",n=[],e=0;e<L.length;e++){L[e].constructor!=Array&&(L[e]=[L[e]]);for(var a=0;a<L[e].length;a++)n[a]||(n[a]=[]),n[a].push(L[e][a]),n[a].length>C&&(C=n[a].length,w=L[e].length);I?(l(sum(L[e])),h(sum(L[e]))):(l(L[e]),h(L[e]))}G&&er&&(n=o(n)),G&&nr&&(n=i(n));for(var a=0;a<n.length;a++)r+=t(n[a],m)+",";return r=x(r,","),"s:"+r}function i(t){for(var r=[],n=1;C>=n;n++)r.push(0);return t.push(r),t}function o(t){for(var r=[],n=1;C>=n;n++)r.push(m);return t.unshift(r),t}function a(){var t="",r="",n=w;G&&er&&n++;for(var e=0;n>e;e++)r=_colors[e]||gr[e],t+=r+",";return t=x(t,",")}function s(){return F+","+m}function l(t){t.constructor==Array?t.forEach(function(t){l(t)}):t>m&&(m=t)}function h(t){t.constructor==Array?t.forEach(function(t){h(t)}):F>t&&(F=t)}function c(){return"0,"+F+","+m+"|1,"+F+","+m}function f(){var t="";if(0==q.length&&C>10&&(H=parseInt(C/10)),E){for(var r=[],n=q.length;n>0;n--)r.push(q[n-1]);q=r}for(var n=0;C>n;n++){var e=n%H==0?q[n]||n:"";t+=e+"|"}t=x(t,"|");var i=E?1:0;return i+":|"+t}function g(){var t=u(U),r=u(V),n="";return K&&$&&(K+=parseInt($)),K&&"s"==t&&(n="bg,s,"+K),K&&"lg"==t&&(n="bg,lg,"+W+","+K+",0,"+R+",1"),K&&"ls"==t&&(n="bg,ls,"+W+","+K+",0."+parseInt(Y/10)+","+R+",0."+parseInt(Y/10)),P&&tr&&(P+=parseInt(tr)),P&&K&&(n+="|"),P&&"s"==r&&(n+="c,s,"+P),P&&"lg"==r&&(n+="c,lg,"+X+","+P+",0,"+S+",1"),P&&"ls"==r&&(n+="c,ls,"+X+","+P+",0."+parseInt(Z/10)+","+S+",0."+parseInt(Z/10)),n}function u(t){return"solid"==t?"s":"gradient"==t?"lg":"stripes"==t?"ls":t}function d(){var t=[],r="";return G&&(t=a(_colors,er).split(","),t.forEach(function(t,n){r+="b,"+t+","+n+","+(n+1)+",0|"}),r=x(r,"|")),r}function p(){var t="";return lr>=0&&(t+=lr),sr>=0&&(t+=","+sr),hr>=0&&(t+=","+hr),cr>=0&&(t+=","+cr),t}function _(){var t="";return fr.forEach(function(r){t+=r.join(",")+"|"}),t=x(t,"|")}function b(t){-1!==jGCharts.Api.type.indexOf(t.type)&&(Q=t.type),t.size&&(D=t.size),t.data&&(L=t.data),t.axis_labels&&(q=t.axis_labels),t.axis_step&&(H=t.axis_step),_colors=t.colors?t.colors:[],t.lines&&(fr=t.lines),t.title&&(N=t.title),t.title_color&&t.title_size&&(T=t.title_color+","+t.title_size),t.bar_width&&(ir=t.bar_width),t.bar_spacing>=0&&(or=t.bar_spacing),t.fillarea&&(rr=t.fillarea),t.fillbottom&&(nr=t.fillbottom),t.filltop&&(er=t.filltop),t.axis_type&&(J=t.axis_type),t.bg&&(K=t.bg),t.bg_type&&(U=t.bg_type),t.bg_offset&&(R=t.bg_offset),t.bg_width&&(Y=t.bg_width),t.bg_angle>=0&&(W=t.bg_angle),t.bg_trasparency&&($=t.bg_trasparency),t.chbg&&(P=t.chbg),t.chbg_type&&(V=t.chbg_type),t.chbg_offset&&(S=t.chbg_offset),t.chbg_width&&(Z=t.chbg_width),t.chbg_angle>=0&&(X=t.chbg_angle),t.chbg_trasparency&&(tr=t.chbg_trasparency),t.grid&&(ar=t.grid,t.grid_x>=0&&(lr=t.grid_x),t.grid_y>=0&&(sr=t.grid_y),t.grid_line>=0&&(hr=t.grid_line),t.grid_blank>=0&&(cr=t.grid_blank)),t.legend&&(M=t.legend,""!=t.legend_position&&(_legend_position=t.legend_position))}function y(t,r,n){var e=n?"":"&";return A[t]+"="+r+e}function v(){O=-1!==Q.indexOf("v"),E=-1!==Q.indexOf("h"),I=-1!==Q.indexOf("s")&&"ls"!=Q&&"lc"!=Q,z="ls"==Q||"lc"==Q,B="p"==Q||"p3"==Q,G=z&&rr,k=-1!==Q.indexOf("b")}function x(t,r){return-1!==t.lastIndexOf(r)?t.substr(0,t.lastIndexOf(r)):t}var w=0,C=0,m=0,F=0,j="http://chart.apis.google.com/chart?",A={type:"cht",size:"chs",data:"chd",colors:"chco",scaling:"chds",axis_type:"chxt",axis_range:"chxr",axis_labels:"chxl",legend:"chdl",legend_position:"chdlp",bar_width:"chbh",background:"chf",fillarea:"chm",title:"chtt",title_style:"chts",grid:"chg",line_style:"chls",agent:"agent"},I=!1,E=!1,O=!1,G=!1,k=!1,z=!1,B=!1,Q="bvg",D="300x200",N=!1,T=!1,L=!1,M=!1,q=[],H=1,J="x,y",K=!1,P=!1,R=!1,S=!1,U="solid",V="solid",W=90,X=90,Y=10,Z=10,$=!1,tr=!1,rr=!1,nr=!1,er=!1,ir=20,or=1,ar=!1,sr=10,lr=10,hr=10,cr=0,fr=!1,gr=["5131C9","FFCC00","DA1B1B","FF9900","FF6600","CCFFFF","CCFF00","CCCCCC","FF99CC","999900","999999","66FF00","66CC00","669900","660099","33CC00","333399","000000"],ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return{make:function(t){var i=j;return b(t),v(),i+=y("type",Q),i+=y("size",D),N&&(i+=y("title",N)),T&&(i+=y("title_style",T)),k&&(i+=y("bar_width",r())),i+=y("axis_type",J),!B&&M.length>0&&(i+=y("legend",n()),i+=y("legend_position",_legend_position)),i+=y("data",e()),i+=y("scaling",s()),i+=y("axis_range",c()),i+=y("axis_labels",f()),i+=y("background",g()),i+=y("colors",a()),z&&fr&&(i+=y("line_style",_())),ar&&(i+=y("grid",p())),z&&G&&(i+=y("fillarea",d())),i+=y("agent","jgcharts",!0)}}},jGCharts.Api.type=["bhs","bvs","bhg","bvg","lc","ls","p","p3"],Function.prototype.method=function(t,r){return this.prototype[t]=r,this},Array.prototype.forEach||Array.method("forEach",function(t,r){for(var n=r||window,e=0,i=this.length;i>e;++e)t.call(n,this[e],e,this)}).method("every",function(t,r){for(var n=r||window,e=0,i=this.length;i>e;++e)if(!t.call(n,this[e],e,this))return!1;return!0}).method("some",function(t,r){for(var n=r||window,e=0,i=this.length;i>e;++e)if(t.call(n,this[e],e,this))return!0;return!1}).method("map",function(t,r){for(var n=r||window,e=[],i=0,o=this.length;o>i;++i)e.push(t.call(n,this[i],i,this));return e}).method("filter",function(t,r){for(var n=r||window,e=[],i=0,o=this.length;o>i;++i)t.call(n,this[i],i,this)&&e.push(this[i]);return e}).method("indexOf",function(t,r){for(var r=r||0,n=r,e=this.length;e>n;++n)if(this[n]===t)return n;return-1}).method("lastIndexOf",function(t,r){var r=r||this.length;r>=this.length&&(r=this.length),0>r&&(r=this.length+r);for(var n=r;n>=0;--n)if(this[n]===t)return n;return-1}),jGCharts.Base={init:function(t){return t=jQuery.extend({},t),this.each(function(){if(!t.data)throw new Error("No Data");var r=new jGCharts.Api,n=r.make(t);jQuery("<img>").attr("src",n).appendTo(this),jQuery("<p>"+n+"</p>").appendTo(this)})}},jQuery.fn.jgcharts=jGCharts.Base.init;
