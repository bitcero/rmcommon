!function(n){this.CUIcons=function(){},CUIcons.prototype.loadFromProvider=function(o){if(void 0==o||""==o)return!1;cuHandler.showLoader();var i={CUTOKEN_REQUEST:n("#cu-token").val(),provider:o,action:"load-icons",size:n("#icons-sizes :radio:checked").val()};n.get("icons.php",i,function(o){return cuHandler.closeLoader(),cuHandler.retrieveAjax(o)?(n(".icons-container .panel-title").html(o.message),void n(".icons-container .panel-body").html(o.content)):(n(".icons-container .panel-body").append('<span class="label label-warning">'+o.message+"</span>"),!1)},"json")},CUIcons.prototype.changeSize=function(o){return void 0==o||0>=o?!1:void n(".icons-container .icons-grid").attr("data-size",o)},CUIcons.prototype.showData=function(o){if(void 0==o||o.length<=0)return!1;var i={icon:'<span class="icon-load"></span>',iconCode:n(o).data("icon"),provider:n(o).parents(".icons-grid").data("provider"),file:n(o).attr("title")},e=n.templates("#details-tpl"),a=n("<div/>").attr("id","icon-details").append(e.render(i));n(a).find(".icon-load").append(cuHandler.loadIcon(n(o).data("icon"))),n("body").append(a)},CUIcons.prototype.filter=function(o){var i=n(o).val().trim(),e=0;return i.length<1?(n(".icons-grid > li").fadeIn(),null):void n(".icons-grid > li").each(function(){n(this).data("icon").search(new RegExp(i,"i"))<0?n(this).fadeOut():(n(this).fadeIn(),e++)})};var o=new CUIcons;n("#provider").change(function(){o.loadFromProvider(n(this).val())}),n("#icons-sizes :radio").change(function(){o.changeSize(n(this).val())}),n("body").on("click",".icons-grid a",function(){return o.showData(n(this)),!1}),n("body").on("click","#icon-details .close",function(){n("#icon-details").fadeOut(500,function(){n(this).remove()})}),n("#icons-search").keyup(function(){o.filter(n(this))})}(jQuery);
