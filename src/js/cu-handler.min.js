!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.bootbox=e(t.jQuery)}(this,function t(e,o){"use strict";function n(t){var e=v[h.locale];return e?e[t]:v.en[t]}function i(t,o,n){t.stopPropagation(),t.preventDefault(),e.isFunction(n)&&!1===n.call(o,t)||o.modal("hide")}function s(t){var e,o=0;for(e in t)o++;return o}function a(t,o){var n=0;e.each(t,function(t,e){o(t,e,n++)})}function r(t){var o,n;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return(t=e.extend({},h,t)).buttons||(t.buttons={}),o=t.buttons,n=s(o),a(o,function(t,i,s){if(e.isFunction(i)&&(i=o[t]={callback:i}),"object"!==e.type(i))throw new Error("button with key "+t+" must be an object");i.label||(i.label=t),i.className||(i.className=n<=2&&s===n-1?"btn-primary":"btn-default")}),t}function c(t,e){var o=t.length,n={};if(o<1||o>2)throw new Error("Invalid argument length");return 2===o||"string"==typeof t[0]?(n[e[0]]=t[0],n[e[1]]=t[1]):n=t[0],n}function l(t,o,n){return e.extend(!0,{},t,c(o,n))}function p(t,e,o,n){return u(l({className:"bootbox-"+t,buttons:d.apply(null,e)},n,o),e)}function d(){for(var t={},e=0,o=arguments.length;e<o;e++){var i=arguments[e],s=i.toLowerCase(),a=i.toUpperCase();t[s]={label:n(a)}}return t}function u(t,e){var n={};return a(e,function(t,e){n[e]=!0}),a(t.buttons,function(t){if(n[t]===o)throw new Error("button key "+t+" is not allowed (options are "+e.join("\n")+")")}),t}var f={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",helpButton:"<a href='%s' class='help-button' target='_blank'>?</a>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},h={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",id:"",helpButton:!1,helpUrl:"#"},m={};m.alert=function(){var t;if((t=p("alert",["ok"],["message","callback"],arguments)).callback&&!e.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return!e.isFunction(t.callback)||t.callback.call(this)},m.dialog(t)},m.confirm=function(){var t;if(t=p("confirm",["cancel","confirm"],["message","callback"],arguments),t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,!1)},t.buttons.confirm.callback=function(){return t.callback.call(this,!0)},!e.isFunction(t.callback))throw new Error("confirm requires a callback");return m.dialog(t)},m.prompt=function(){var t,n,i,s,r,c,p;if(s=e(f.form),n={className:"bootbox-prompt",buttons:d("cancel","confirm"),value:"",inputType:"text"},t=u(l(n,arguments,["title","callback"]),["cancel","confirm"]),c=t.show===o||t.show,t.message=s,t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,null)},t.buttons.confirm.callback=function(){var o;switch(t.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":o=r.val();break;case"checkbox":var n=r.find("input:checked");o=[],a(n,function(t,n){o.push(e(n).val())})}return t.callback.call(this,o)},t.show=!1,!t.title)throw new Error("prompt requires a title");if(!e.isFunction(t.callback))throw new Error("prompt requires a callback");if(!f.inputs[t.inputType])throw new Error("invalid prompt type");switch(r=e(f.inputs[t.inputType]),t.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":r.val(t.value);break;case"select":var h={};if(p=t.inputOptions||[],!e.isArray(p))throw new Error("Please pass an array of input options");if(!p.length)throw new Error("prompt with select requires options");a(p,function(t,n){var i=r;if(n.value===o||n.text===o)throw new Error("given options in wrong format");n.group&&(h[n.group]||(h[n.group]=e("<optgroup/>").attr("label",n.group)),i=h[n.group]),i.append("<option value='"+n.value+"'>"+n.text+"</option>")}),a(h,function(t,e){r.append(e)}),r.val(t.value);break;case"checkbox":var v=e.isArray(t.value)?t.value:[t.value];if(!(p=t.inputOptions||[]).length)throw new Error("prompt with checkbox requires options");if(!p[0].value||!p[0].text)throw new Error("given options in wrong format");r=e("<div/>"),a(p,function(o,n){var i=e(f.inputs[t.inputType]);i.find("input").attr("value",n.value),i.find("label").append(n.text),a(v,function(t,e){e===n.value&&i.find("input").prop("checked",!0)}),r.append(i)})}return t.placeholder&&r.attr("placeholder",t.placeholder),t.pattern&&r.attr("pattern",t.pattern),t.maxlength&&r.attr("maxlength",t.maxlength),s.append(r),s.on("submit",function(t){t.preventDefault(),t.stopPropagation(),i.find(".btn-primary").click()}),(i=m.dialog(t)).off("shown.bs.modal"),i.on("shown.bs.modal",function(){r.focus()}),!0===c&&i.modal("show"),i},m.dialog=function(t){t=r(t);var n=e(f.dialog),s=n.find(".modal-dialog"),c=n.find(".modal-body"),l=t.buttons,p="",d={onEscape:t.onEscape};if(e.fn.modal===o)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(a(l,function(t,e){p+="<button data-bb-handler='"+t+"' type='button' class='btn "+e.className+"'>"+e.label+"</button>",d[t]=e.callback}),c.find(".bootbox-body").html(t.message),t.id&&n.attr("id",t.id),!0===t.animate&&n.addClass("fade"),t.owner&&n.attr("data-owner",t.owner),t.className&&n.addClass(t.className),t.width&&(t.size="small"==t.width?"bsmall":t.width),t.size&&s.addClass(t.size),t.color!=o&&""!=t.color&&s.addClass("modal-"+t.color),t.title&&c.before(f.header),t.solid&&n.addClass("modal-solid"),t.helpButton){var u=e(f.helpButton.replace("%s",t.helpUrl));t.title?n.find(".modal-header").prepend(u):u.css("margin-top","-10px").prependTo(c)}if(t.closeButton){var h=e(f.closeButton);t.title?n.find(".modal-header").prepend(h):h.css("margin-top","-10px").prependTo(c)}return t.title&&(t.icon?n.find(".modal-title").html('<i class="'+t.icon+'"></i> '+t.title):n.find(".modal-title").html(t.title)),p.length&&(c.after(f.footer),n.find(".modal-footer").html(p)),n.on("hidden.bs.modal",function(t){t.target===this&&n.remove()}),n.on("shown.bs.modal",function(){n.find(".btn-primary:first").focus()}),"static"!==t.backdrop&&n.on("click.dismiss.bs.modal",function(t){n.children(".modal-backdrop").length&&(t.currentTarget=n.children(".modal-backdrop").get(0)),t.target===t.currentTarget&&n.trigger("escape.close.bb")}),""!=t.id&&n.attr("id",t.id),n.on("escape.close.bb",function(t){d.onEscape&&i(t,n,d.onEscape)}),n.on("click",".modal-footer button",function(t){var o=e(this).data("bb-handler");i(t,n,d[o])}),n.on("click",".bootbox-close-button",function(t){i(t,n,d.onEscape)}),n.on("keyup",function(t){27===t.which&&n.trigger("escape.close.bb")}),e(t.container).append(n),n.modal({backdrop:!!t.backdrop&&"static",keyboard:!1,show:!1}),t.show&&n.modal("show"),n},m.setDefaults=function(){var t={};2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],e.extend(h,t)},m.hideAll=function(){return e(".bootbox").modal("hide"),m};var v={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return m.addLocale=function(t,o){return e.each(["OK","CANCEL","CONFIRM"],function(t,e){if(!o[e])throw new Error("Please supply a translation for '"+e+"'")}),v[t]={OK:o.OK,CANCEL:o.CANCEL,CONFIRM:o.CONFIRM},m},m.removeLocale=function(t){return delete v[t],m},m.setLocale=function(t){return m.setDefaults("locale",t)},m.init=function(o){return t(o||e)},m}),function(t){t.fn.cuSpinner=function(e){var o=t.extend({icon:"svg-rmcommon-spinner-06",type:"spin",hide:"cu-icon",class:"",steps:12,speed:3},e);o.type="spin"!=o.type&&"pulse"!=o.type?"spin":o.type;"pulse"==o.type?o.steps:o.speed;return this.each(function(){var e=t(this),n=cuHandler.getIcon(o.icon);n||(n=cuHandler.getIcon("svg-rmcommon-spinner-06"));var i=t(this).find(".cu-spinner");if(i.length>0)return t(i).remove(),t(this).find(".cu-spinner-hide").removeClass("cu-spinner-hide").show(),!0;var s=t("<span />",{class:"cu-icon cu-spinner"+(""!=o.class?" "+o.class:"")});return s.load(n,function(){var n=t(e).find("."+o.hide);n.length>0?(n.addClass("cu-spinner-hide").hide(),t(n[0]).after(s)):t(e).prepend(s)}),!0})}}(jQuery),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("pnotify",["jquery"],t):t(jQuery)}(function(t){var e,o,n={dir1:"down",dir2:"left",push:"bottom",spacing1:5,spacing2:5,context:t("body")},i=t(window),s=function(){o=t("body"),PNotify.prototype.options.stack.context=o,(i=t(window)).bind("resize",function(){e&&clearTimeout(e),e=setTimeout(function(){PNotify.positionAll(!0)},10)})};return PNotify=function(t){this.parseOptions(t),this.init()},t.extend(PNotify.prototype,{version:"2.1.0",options:{title:!1,title_escape:!1,text:!1,text_escape:!1,styling:"brighttheme",addclass:"",cornerclass:"",auto_display:!0,width:"300px",min_height:"16px",type:"notice",icon:!0,opacity:1,animation:"fade",animate_speed:"slow",position_animate_speed:500,shadow:!0,hide:!0,delay:8e3,mouse_reset:!0,remove:!0,insert_brs:!0,destroy:!0,stack:n},modules:{},runModules:function(t,e){var o;for(var n in this.modules)o="object"==typeof e&&n in e?e[n]:e,"function"==typeof this.modules[n][t]&&this.modules[n][t](this,"object"==typeof this.options[n]?this.options[n]:{},o)},state:"initializing",timer:null,styles:null,elem:null,container:null,title_container:null,text_container:null,animating:!1,timerHide:!1,init:function(){var e=this;if(this.modules={},t.extend(!0,this.modules,PNotify.prototype.modules),"object"==typeof this.options.styling?this.styles=this.options.styling:this.styles=PNotify.styling[this.options.styling],this.elem=t("<div />",{class:"ui-pnotify "+this.options.addclass,css:{display:"none"},"aria-live":"assertive",mouseenter:function(){if(e.options.mouse_reset&&"out"===e.animating){if(!e.timerHide)return;e.cancelRemove()}e.options.hide&&e.options.mouse_reset&&e.cancelRemove()},mouseleave:function(){e.options.hide&&e.options.mouse_reset&&"out"!==e.animating&&e.queueRemove(),PNotify.positionAll()}}),this.container=t("<div />",{class:"alert "+this.options.type,role:"alert"}).appendTo(this.elem),""!==this.options.cornerclass&&this.container.removeClass("ui-corner-all").addClass(this.options.cornerclass),this.options.shadow&&this.container.addClass("ui-pnotify-shadow"),!1!==this.options.icon)if("string"==typeof this.options.icon){var o=t("<div />",{class:"ui-pnotify-icon"});cuHandler.loadIcon(this.options.icon,o),o.prependTo(this.container)}else t("<div />",{class:"ui-pnotify-icon"}).append(t("<span />",{class:!0===this.options.icon?"error"===this.options.type?this.styles.error_icon:"info"===this.options.type?this.styles.info_icon:"success"===this.options.type?this.styles.success_icon:this.styles.notice_icon:this.options.icon})).prependTo(this.container);return this.title_container=t("<h4 />",{class:"ui-pnotify-title"}).appendTo(this.container),!1===this.options.title?this.title_container.hide():this.options.title_escape?this.title_container.text(this.options.title):this.title_container.html(this.options.title),this.text_container=t("<div />",{class:"ui-pnotify-text"}).appendTo(this.container),!1===this.options.text?this.text_container.hide():this.options.text_escape?this.text_container.text(this.options.text):this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text),"string"==typeof this.options.min_height&&this.container.css("min-height",this.options.min_height),"top"===this.options.stack.push?PNotify.notices=t.merge([this],PNotify.notices):PNotify.notices=t.merge(PNotify.notices,[this]),"top"===this.options.stack.push&&this.queuePosition(!1,1),this.options.stack.animation=!1,this.runModules("init"),this.options.auto_display&&this.open(),this},update:function(e){var o=this.options;if(this.parseOptions(o,e),this.options.cornerclass!==o.cornerclass&&this.container.removeClass("ui-corner-all "+o.cornerclass).addClass(this.options.cornerclass),this.options.shadow!==o.shadow&&(this.options.shadow?this.container.addClass("ui-pnotify-shadow"):this.container.removeClass("ui-pnotify-shadow")),!1===this.options.addclass?this.elem.removeClass(o.addclass):this.options.addclass!==o.addclass&&this.elem.removeClass(o.addclass).addClass(this.options.addclass),!1===this.options.title?this.title_container.slideUp("fast"):this.options.title!==o.title&&(this.options.title_escape?this.title_container.text(this.options.title):this.title_container.html(this.options.title),!1===o.title&&this.title_container.slideDown(200)),!1===this.options.text?this.text_container.slideUp("fast"):this.options.text!==o.text&&(this.options.text_escape?this.text_container.text(this.options.text):this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text),!1===o.text&&this.text_container.slideDown(200)),this.options.type!==o.type&&this.container.removeClass(this.styles.error+" "+this.styles.notice+" "+this.styles.success+" "+this.styles.info).addClass(this.options.type),(this.options.icon!==o.icon||!0===this.options.icon&&this.options.type!==o.type)&&(this.container.find("div.ui-pnotify-icon").remove(),!1!==this.options.icon))if("string"==typeof this.options.icon){var n=t("<div />",{class:"ui-pnotify-icon"});cuHandler.loadIcon(this.options.icon,n),n.prependTo(this.container)}else t("<div />",{class:"ui-pnotify-icon"}).append(t("<span />",{class:!0===this.options.icon?"error"===this.options.type?this.styles.error_icon:"info"===this.options.type?this.styles.info_icon:"success"===this.options.type?this.styles.success_icon:this.styles.notice_icon:this.options.icon})).prependTo(this.container);return this.options.min_height!==o.min_height&&this.container.animate({minHeight:this.options.min_height}),this.options.opacity!==o.opacity&&this.elem.fadeTo(this.options.animate_speed,this.options.opacity),this.options.hide?o.hide||this.queueRemove():this.cancelRemove(),this.queuePosition(!0),this.runModules("update",o),this},open:function(){this.state="opening",this.runModules("beforeOpen");var t=this;return this.elem.parent().length||this.elem.appendTo(this.options.stack.context?this.options.stack.context:o),"top"!==this.options.stack.push&&this.position(!0),"fade"===this.options.animation||"fade"===this.options.animation.effect_in?this.elem.show().fadeTo(0,0).hide():1!==this.options.opacity&&this.elem.show().fadeTo(0,this.options.opacity).hide(),this.animateIn(function(){t.queuePosition(!0),t.options.hide&&t.queueRemove(),t.state="open",t.runModules("afterOpen")}),this},remove:function(e){this.state="closing",this.timerHide=!!e,this.runModules("beforeClose");var o=this;return this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.animateOut(function(){if(o.state="closed",o.runModules("afterClose"),o.queuePosition(!0),o.options.remove&&o.elem.detach(),o.runModules("beforeDestroy"),o.options.destroy&&null!==PNotify.notices){var e=t.inArray(o,PNotify.notices);-1!==e&&PNotify.notices.splice(e,1)}o.runModules("afterDestroy")}),this},get:function(){return this.elem},parseOptions:function(e,o){this.options=t.extend(!0,{},PNotify.prototype.options),this.options.stack=PNotify.prototype.options.stack;for(var n,i=[e,o],s=0;s<i.length&&void 0!==(n=i[s]);s++)if("object"!=typeof n)this.options.text=n;else for(var a in n)this.modules[a]?t.extend(!0,this.options[a],n[a]):this.options[a]=n[a]},animateIn:function(t){this.animating="in";var e;"none"===(e=void 0!==this.options.animation.effect_in?this.options.animation.effect_in:this.options.animation)?(this.elem.show(),t()):"show"===e?this.elem.show(this.options.animate_speed,t):"fade"===e?this.elem.show().fadeTo(this.options.animate_speed,this.options.opacity,t):"slide"===e?this.elem.slideDown(this.options.animate_speed,t):"function"==typeof e?e("in",t,this.elem):this.elem.show(e,"object"==typeof this.options.animation.options_in?this.options.animation.options_in:{},this.options.animate_speed,t),this.elem.parent().hasClass("ui-effects-wrapper")&&this.elem.parent().css({position:"fixed",overflow:"visible"}),"slide"!==e&&this.elem.css("overflow","visible"),this.container.css("overflow","hidden")},animateOut:function(t){this.animating="out";var e;"none"===(e=void 0!==this.options.animation.effect_out?this.options.animation.effect_out:this.options.animation)?(this.elem.hide(),t()):"show"===e?this.elem.hide(this.options.animate_speed,t):"fade"===e?this.elem.fadeOut(this.options.animate_speed,t):"slide"===e?this.elem.slideUp(this.options.animate_speed,t):"function"==typeof e?e("out",t,this.elem):this.elem.hide(e,"object"==typeof this.options.animation.options_out?this.options.animation.options_out:{},this.options.animate_speed,t),this.elem.parent().hasClass("ui-effects-wrapper")&&this.elem.parent().css({position:"fixed",overflow:"visible"}),"slide"!==e&&this.elem.css("overflow","visible"),this.container.css("overflow","hidden")},position:function(t){var e=this.options.stack,n=this.elem;if(n.parent().hasClass("ui-effects-wrapper")&&(n=this.elem.css({left:"0",top:"0",right:"0",bottom:"0"}).parent()),void 0===e.context&&(e.context=o),e){"number"!=typeof e.nextpos1&&(e.nextpos1=e.firstpos1),"number"!=typeof e.nextpos2&&(e.nextpos2=e.firstpos2),"number"!=typeof e.addpos2&&(e.addpos2=0);var s="none"===n.css("display");if(!s||t){var a,r,c,l={};switch(e.dir1){case"down":c="top";break;case"up":c="bottom";break;case"left":c="right";break;case"right":c="left"}a=parseInt(n.css(c).replace(/(?:\..*|[^0-9.])/g,"")),isNaN(a)&&(a=0),void 0!==e.firstpos1||s||(e.firstpos1=a,e.nextpos1=e.firstpos1);var p;switch(e.dir2){case"down":p="top";break;case"up":p="bottom";break;case"left":p="right";break;case"right":p="left"}if(r=parseInt(n.css(p).replace(/(?:\..*|[^0-9.])/g,"")),isNaN(r)&&(r=0),void 0!==e.firstpos2||s||(e.firstpos2=r,e.nextpos2=e.firstpos2),("down"===e.dir1&&e.nextpos1+n.height()>(e.context.is(o)?i.height():e.context.prop("scrollHeight"))||"up"===e.dir1&&e.nextpos1+n.height()>(e.context.is(o)?i.height():e.context.prop("scrollHeight"))||"left"===e.dir1&&e.nextpos1+n.width()>(e.context.is(o)?i.width():e.context.prop("scrollWidth"))||"right"===e.dir1&&e.nextpos1+n.width()>(e.context.is(o)?i.width():e.context.prop("scrollWidth")))&&(e.nextpos1=e.firstpos1,e.nextpos2+=e.addpos2+(void 0===e.spacing2?25:e.spacing2),e.addpos2=0),e.animation&&e.nextpos2<r)switch(e.dir2){case"down":l.top=e.nextpos2+"px";break;case"up":l.bottom=e.nextpos2+"px";break;case"left":l.right=e.nextpos2+"px";break;case"right":l.left=e.nextpos2+"px"}else"number"==typeof e.nextpos2&&n.css(p,e.nextpos2+"px");switch(e.dir2){case"down":case"up":n.outerHeight(!0)>e.addpos2&&(e.addpos2=n.height());break;case"left":case"right":n.outerWidth(!0)>e.addpos2&&(e.addpos2=n.width())}if("number"==typeof e.nextpos1)if(e.animation&&(a>e.nextpos1||l.top||l.bottom||l.right||l.left))switch(e.dir1){case"down":l.top=e.nextpos1+"px";break;case"up":l.bottom=e.nextpos1+"px";break;case"left":l.right=e.nextpos1+"px";break;case"right":l.left=e.nextpos1+"px"}else n.css(c,e.nextpos1+"px");switch((l.top||l.bottom||l.right||l.left)&&n.animate(l,{duration:this.options.position_animate_speed,queue:!1}),e.dir1){case"down":case"up":e.nextpos1+=n.height()+(void 0===e.spacing1?5:e.spacing1);break;case"left":case"right":e.nextpos1+=n.width()+(void 0===e.spacing1?5:e.spacing1)}}return this}},queuePosition:function(t,o){return e&&clearTimeout(e),o||(o=10),e=setTimeout(function(){PNotify.positionAll(t)},o),this},cancelRemove:function(){return this.timer&&window.clearTimeout(this.timer),"closing"===this.state&&(this.elem.stop(!0),this.state="open",this.animating="in",this.elem.css("height","auto").animate({width:this.options.width,opacity:this.options.opacity},"fast")),this},queueRemove:function(){var t=this;return this.cancelRemove(),this.timer=window.setTimeout(function(){t.remove(!0)},isNaN(this.options.delay)?0:this.options.delay),this}}),t.extend(PNotify,{notices:[],removeAll:function(){t.each(PNotify.notices,function(){this.remove&&this.remove(!1)})},positionAll:function(o){if(e&&clearTimeout(e),e=null,PNotify.notices&&PNotify.notices.length)t.each(PNotify.notices,function(){var t=this.options.stack;t&&(t.nextpos1=t.firstpos1,t.nextpos2=t.firstpos2,t.addpos2=0,t.animation=o)}),t.each(PNotify.notices,function(){this.position()});else{var n=PNotify.prototype.options.stack;n&&(delete n.nextpos1,delete n.nextpos2)}},styling:{brighttheme:{container:"brighttheme",notice:"brighttheme-notice",notice_icon:"brighttheme-icon-notice",info:"brighttheme-info",info_icon:"brighttheme-icon-info",success:"brighttheme-success",success_icon:"brighttheme-icon-success",error:"brighttheme-error",error_icon:"brighttheme-icon-error"},jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert"},bootstrap2:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign"},bootstrap3:{container:"alert",notice:"alert-warning",notice_icon:"glyphicon glyphicon-exclamation-sign",info:"alert-info",info_icon:"glyphicon glyphicon-info-sign",success:"alert-success",success_icon:"glyphicon glyphicon-ok-sign",error:"alert-danger",error_icon:"glyphicon glyphicon-warning-sign"}}}),PNotify.styling.fontawesome=t.extend({},PNotify.styling.bootstrap3),t.extend(PNotify.styling.fontawesome,{notice_icon:"fa fa-exclamation-circle",info_icon:"fa fa-info",success_icon:"fa fa-check",error_icon:"fa fa-warning"}),document.body?s():t(s),PNotify}),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("pnotify")):"function"==typeof define&&define.amd?define("pnotify.buttons",["jquery","pnotify"],t):t(jQuery,PNotify)}(function(t,e){e.prototype.options.buttons={closer:!0,closer_hover:!0,sticker:!0,sticker_hover:!0,show_on_nonblock:!1,labels:{close:"Close",stick:"Stick"}},e.prototype.modules.buttons={myOptions:null,closer:null,sticker:null,init:function(e,o){var n=this;this.myOptions=o,e.elem.on({mouseenter:function(){!n.myOptions.sticker||e.options.nonblock&&e.options.nonblock.nonblock&&!n.myOptions.show_on_nonblock||n.sticker.trigger("pnotify_icon").css("visibility","visible"),!n.myOptions.closer||e.options.nonblock&&e.options.nonblock.nonblock&&!n.myOptions.show_on_nonblock||n.closer.css("visibility","visible")},mouseleave:function(){n.myOptions.sticker_hover&&n.sticker.css("visibility","hidden"),n.myOptions.closer_hover&&n.closer.css("visibility","hidden")}}),this.sticker=t("<div />",{class:"ui-pnotify-sticker",css:{cursor:"pointer",visibility:o.sticker_hover?"hidden":"visible"},click:function(){e.options.hide=!e.options.hide,e.options.hide?e.queueRemove():e.cancelRemove(),t(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){t(this).children().removeClass(e.styles.pin_up+" "+e.styles.pin_down).addClass(e.options.hide?e.styles.pin_up:e.styles.pin_down),t(this).children().load(cuHandler.url("/modules/rmcommon/icons/"+(e.options.hide?"pause.svg":"play.svg")))}).append(t("<span />",{class:e.styles.pin_up,title:o.labels.stick}).load(cuHandler.url("/modules/rmcommon/icons/pause.svg"))).prependTo(e.container),(!o.sticker||e.options.nonblock&&e.options.nonblock.nonblock&&!o.show_on_nonblock)&&this.sticker.css("display","none"),this.closer=t("<div />",{class:"ui-pnotify-closer",css:{cursor:"pointer",visibility:o.closer_hover?"hidden":"visible"},click:function(){e.remove(!1),n.sticker.css("visibility","hidden"),n.closer.css("visibility","hidden")}}).append(t("<span />",{class:e.styles.closer,title:o.labels.close}).load(cuHandler.url("/modules/rmcommon/icons/close.svg"))).prependTo(e.container),(!o.closer||e.options.nonblock&&e.options.nonblock.nonblock&&!o.show_on_nonblock)&&this.closer.css("display","none")},update:function(t,e){this.myOptions=e,!e.closer||t.options.nonblock&&t.options.nonblock.nonblock&&!e.show_on_nonblock?this.closer.css("display","none"):e.closer&&this.closer.css("display","block"),!e.sticker||t.options.nonblock&&t.options.nonblock.nonblock&&!e.show_on_nonblock?this.sticker.css("display","none"):e.sticker&&this.sticker.css("display","block"),this.sticker.trigger("pnotify_icon"),e.sticker_hover?this.sticker.css("visibility","hidden"):t.options.nonblock&&t.options.nonblock.nonblock&&!e.show_on_nonblock||this.sticker.css("visibility","visible"),e.closer_hover?this.closer.css("visibility","hidden"):t.options.nonblock&&t.options.nonblock.nonblock&&!e.show_on_nonblock||this.closer.css("visibility","visible")}},t.extend(e.styling.brighttheme,{closer:"cu-icon",pin_up:"cu-icon",pin_down:"cu-icon"}),t.extend(e.styling.jqueryui,{closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s"}),t.extend(e.styling.bootstrap2,{closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play"}),t.extend(e.styling.bootstrap3,{closer:"glyphicon glyphicon-remove",pin_up:"glyphicon glyphicon-pause",pin_down:"glyphicon glyphicon-play"}),t.extend(e.styling.fontawesome,{closer:"fa fa-times",pin_up:"fa fa-pause",pin_down:"fa fa-play"})}),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("pnotify")):"function"==typeof define&&define.amd?define("pnotify.callbacks",["jquery","pnotify"],t):t(jQuery,PNotify)}(function(t,e){var o=e.prototype.init,n=e.prototype.open,i=e.prototype.remove;e.prototype.init=function(){this.options.before_init&&this.options.before_init(this.options),o.apply(this,arguments),this.options.after_init&&this.options.after_init(this)},e.prototype.open=function(){var t;this.options.before_open&&(t=this.options.before_open(this)),!1!==t&&(n.apply(this,arguments),this.options.after_open&&this.options.after_open(this))},e.prototype.remove=function(t){var e;this.options.before_close&&(e=this.options.before_close(this,t)),!1!==e&&(i.apply(this,arguments),this.options.after_close&&this.options.after_close(this,t))}}),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("pnotify")):"function"==typeof define&&define.amd?define("pnotify.confirm",["jquery","pnotify"],t):t(jQuery,PNotify)}(function(t,e){e.prototype.options.confirm={confirm:!1,prompt:!1,prompt_class:"",prompt_default:"",prompt_multi_line:!1,align:"right",buttons:[{text:"Ok",addClass:"",promptTrigger:!0,click:function(t,e){t.remove(),t.get().trigger("pnotify.confirm",[t,e])}},{text:"Cancel",addClass:"",click:function(t){t.remove(),t.get().trigger("pnotify.cancel",t)}}]},e.prototype.modules.confirm={container:null,prompt:null,init:function(e,o){this.container=t('<div style="margin-top:5px;clear:both;" />').css("text-align",o.align).appendTo(e.container),o.confirm||o.prompt?this.makeDialog(e,o):this.container.hide()},update:function(t,e){e.confirm?(this.makeDialog(t,e),this.container.show()):this.container.hide().empty()},afterOpen:function(t,e){e.prompt&&this.prompt.focus()},makeDialog:function(e,o){var n,i,s=!1,a=this;this.container.empty(),o.prompt&&(this.prompt=t("<"+(o.prompt_multi_line?'textarea rows="5"':'input type="text"')+' style="margin-bottom:5px;clear:both;" />').addClass(e.styles.input+" "+o.prompt_class).val(o.prompt_default).appendTo(this.container));for(var r in o.buttons)n=o.buttons[r],s?this.container.append(" "):s=!0,i=t('<button type="button" />').addClass(e.styles.btn+" "+n.addClass).text(n.text).appendTo(this.container).on("click",function(t){return function(){"function"==typeof t.click&&t.click(e,o.prompt?a.prompt.val():null)}}(n)),o.prompt&&!o.prompt_multi_line&&n.promptTrigger&&this.prompt.keypress(function(t){return function(e){13==e.keyCode&&t.click()}}(i)),e.styles.text&&i.wrapInner('<span class="'+e.styles.text+'"></span>'),e.styles.btnhover&&i.hover(function(t){return function(){t.addClass(e.styles.btnhover)}}(i),function(t){return function(){t.removeClass(e.styles.btnhover)}}(i)),e.styles.btnactive&&i.on("mousedown",function(t){return function(){t.addClass(e.styles.btnactive)}}(i)).on("mouseup",function(t){return function(){t.removeClass(e.styles.btnactive)}}(i)),e.styles.btnfocus&&i.on("focus",function(t){return function(){t.addClass(e.styles.btnfocus)}}(i)).on("blur",function(t){return function(){t.removeClass(e.styles.btnfocus)}}(i))}},t.extend(e.styling.jqueryui,{btn:"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",btnhover:"ui-state-hover",btnactive:"ui-state-active",btnfocus:"ui-state-focus",input:"",text:"ui-button-text"}),t.extend(e.styling.bootstrap2,{btn:"btn",input:""}),t.extend(e.styling.bootstrap3,{btn:"btn btn-default",input:"form-control"}),t.extend(e.styling.fontawesome,{btn:"btn btn-default",input:"form-control"})}),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("pnotify")):"function"==typeof define&&define.amd?define("pnotify.desktop",["jquery","pnotify"],t):t(jQuery,PNotify)}(function(t,e){var o,n=function(t,e){return(n="Notification"in window?function(t,e){return new Notification(t,e)}:"mozNotification"in navigator?function(t,e){return navigator.mozNotification.createNotification(t,e.body,e.icon).show()}:"webkitNotifications"in window?function(t,e){return window.webkitNotifications.createNotification(e.icon,t,e.body)}:function(){return null})(t,e)};e.prototype.options.desktop={desktop:!1,fallback:!0,icon:null,tag:null},e.prototype.modules.desktop={tag:null,icon:null,genNotice:function(t,e){null===e.icon?this.icon="http://sciactive.com/pnotify/includes/desktop/"+t.options.type+".png":!1===e.icon?this.icon=null:this.icon=e.icon,null!==this.tag&&null===e.tag||(this.tag=null===e.tag?"PNotify-"+Math.round(1e6*Math.random()):e.tag),t.desktop=n(t.options.title,{icon:this.icon,body:t.options.text,tag:this.tag}),!("close"in t.desktop)&&"cancel"in t.desktop&&(t.desktop.close=function(){t.desktop.cancel()}),t.desktop.onclick=function(){t.elem.trigger("click")},t.desktop.onclose=function(){"closing"!==t.state&&"closed"!==t.state&&t.remove()}},init:function(t,n){n.desktop&&(0===(o=e.desktop.checkPermission())?this.genNotice(t,n):n.fallback||(t.options.auto_display=!1))},update:function(t,e){0!==o&&e.fallback||!e.desktop||this.genNotice(t,e)},beforeOpen:function(t,e){0!==o&&e.fallback||!e.desktop||t.elem.css({left:"-10000px",display:"none"})},afterOpen:function(t,e){0!==o&&e.fallback||!e.desktop||(t.elem.css({left:"-10000px",display:"none"}),"show"in t.desktop&&t.desktop.show())},beforeClose:function(t,e){0!==o&&e.fallback||!e.desktop||t.elem.css({left:"-10000px",display:"none"})},afterClose:function(t,e){0!==o&&e.fallback||!e.desktop||(t.elem.css({left:"-10000px",display:"none"}),"close"in t.desktop&&t.desktop.close())}},e.desktop={permission:function(){"undefined"!=typeof Notification&&"requestPermission"in Notification?Notification.requestPermission():"webkitNotifications"in window&&window.webkitNotifications.requestPermission()},checkPermission:function(){return"undefined"!=typeof Notification&&"permission"in Notification?"granted"===Notification.permission?0:1:"webkitNotifications"in window&&0==window.webkitNotifications.checkPermission()?0:1}},o=e.desktop.checkPermission()}),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("pnotify")):"function"==typeof define&&define.amd?define("pnotify.nonblock",["jquery","pnotify"],t):t(jQuery,PNotify)}(function(t,e){var o,n=/^on/,i=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,s=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,a=/^(scroll|resize|(un)?load|abort|error)$/,r=function(e,o){var r;if(e=e.toLowerCase(),document.createEvent&&this.dispatchEvent){if(e=e.replace(n,""),e.match(i)?(t(this).offset(),(r=document.createEvent("MouseEvents")).initMouseEvent(e,o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget)):e.match(s)?(r=document.createEvent("UIEvents")).initUIEvent(e,o.bubbles,o.cancelable,o.view,o.detail):e.match(a)&&(r=document.createEvent("HTMLEvents")).initEvent(e,o.bubbles,o.cancelable),!r)return;this.dispatchEvent(r)}else e.match(n)||(e="on"+e),r=document.createEventObject(o),this.fireEvent(e,r)},c=function(e,n,i){e.elem.css("display","none");var s=document.elementFromPoint(n.clientX,n.clientY);e.elem.css("display","block");var a=t(s),c=a.css("cursor");"auto"===c&&"A"===s.tagName&&(c="pointer"),e.elem.css("cursor","auto"!==c?c:"default"),o&&o.get(0)==s||(o&&(r.call(o.get(0),"mouseleave",n.originalEvent),r.call(o.get(0),"mouseout",n.originalEvent)),r.call(s,"mouseenter",n.originalEvent),r.call(s,"mouseover",n.originalEvent)),r.call(s,i,n.originalEvent),o=a};e.prototype.options.nonblock={nonblock:!1,nonblock_opacity:.2},e.prototype.modules.nonblock={myOptions:null,init:function(t,e){var n=this;this.myOptions=e,t.elem.on({mouseenter:function(e){n.myOptions.nonblock&&e.stopPropagation(),n.myOptions.nonblock&&t.elem.stop().animate({opacity:n.myOptions.nonblock_opacity},"fast")},mouseleave:function(e){n.myOptions.nonblock&&e.stopPropagation(),o=null,t.elem.css("cursor","auto"),n.myOptions.nonblock&&"out"!==t.animating&&t.elem.stop().animate({opacity:t.options.opacity},"fast")},mouseover:function(t){n.myOptions.nonblock&&t.stopPropagation()},mouseout:function(t){n.myOptions.nonblock&&t.stopPropagation()},mousemove:function(e){n.myOptions.nonblock&&(e.stopPropagation(),c(t,e,"onmousemove"))},mousedown:function(e){n.myOptions.nonblock&&(e.stopPropagation(),e.preventDefault(),c(t,e,"onmousedown"))},mouseup:function(e){n.myOptions.nonblock&&(e.stopPropagation(),e.preventDefault(),c(t,e,"onmouseup"))},click:function(e){n.myOptions.nonblock&&(e.stopPropagation(),c(t,e,"onclick"))},dblclick:function(e){n.myOptions.nonblock&&(e.stopPropagation(),c(t,e,"ondblclick"))}})},update:function(t,e){this.myOptions=e}}}),function(t,e){var o=e.jQuery;"object"==typeof exports?module.exports=o?t(e,o):function(o){if(o&&!o.fn)throw"Provide jQuery or null";return t(e,o)}:"function"==typeof define&&define.amd?define(function(){return t(e)}):t(e,!1)}(function(t,e){"use strict";function o(t,e){return function(){var o,n=this,i=n.base;return n.base=t,o=e.apply(n,arguments),n.base=i,o}}function n(t,e){return tt(e)&&(e=o(t?t._d?t:o(a,t):a,e),e._d=1),e}function i(t,e){for(var o in e.props)Ot.test(o)&&(t[o]=n(t[o],e.props[o]))}function s(t){return t}function a(){return""}function r(t){try{throw console.log("JsRender dbg breakpoint: "+t),"dbg breakpoint"}catch(t){}return this.base?this.baseApply(arguments):t}function c(t){this.name=(e.link?"JsViews":"JsRender")+" Error",this.message=t||this.name}function l(t,e){for(var o in e)t[o]=e[o];return t}function p(t,e,o){return t?(rt.delimiters=[t,e,ht=o?o.charAt(0):ht],pt=t.charAt(0),dt=t.charAt(1),ut=e.charAt(0),ft=e.charAt(1),t="\\"+pt+"(\\"+ht+")?\\"+dt,e="\\"+ut+"\\"+ft,W="(?:(\\w+(?=[\\/\\s\\"+ut+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+ut+"]|\\"+ut+"(?!\\"+ft+"))*?)",at.rTag="(?:"+W+")",W=new RegExp("(?:"+t+W+"(\\/)?|\\"+pt+"(\\"+ht+")?\\"+dt+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+e,"g"),X=new RegExp("<.*>|([^\\\\]|^)[{}]|"+t+".*"+e),lt):rt.delimiters}function d(t,e){e||!0===t||(e=t,t=void 0);var o,n,i,s,a=this,r=!e||"root"===e;if(t){if(!(s=e&&a.type===e&&a))if(o=a.views,a._.useKey){for(n in o)if(s=e?o[n].get(t,e):o[n])break}else for(n=0,i=o.length;!s&&i>n;n++)s=e?o[n].get(t,e):o[n]}else if(r)for(;a.parent;)s=a,a=a.parent;else for(;a&&!s;)s=a.type===e?a:void 0,a=a.parent;return s}function u(){var t=this.get("item");return t?t.index:void 0}function f(){return this.index}function h(e){var o,n=this,i=n.linkCtx,s=(n.ctx||{})[e];return void 0===s&&i&&i.ctx&&(s=i.ctx[e]),void 0===s&&(s=it[e]),s&&tt(s)&&!s._wrp&&(o=function(){return s.apply(this&&this!==t?this:n,arguments)},o._wrp=n,l(o,s)),o||s}function m(t){return t&&(t.fn?t:this.getRsc("templates",t)||ot(t))}function v(t,e,o,n){var s,a,r="number"==typeof o&&e.tmpl.bnds[o-1],c=e.linkCtx;return void 0!==n?o=n={props:{},args:[n]}:r&&(o=r(e.data,e,at)),a=o.args[0],(t||r)&&((s=c&&c.tag)||(s=l(new at._tg,{_:{inline:!c,bnd:r,unlinked:!0},tagName:":",cvt:t,flow:!0,tagCtx:o}),c&&(c.tag=s,s.linkCtx=c),o.ctx=z(o.ctx,(c?c.view:e).ctx)),s._er=n&&a,i(s,o),o.view=e,s.ctx=o.ctx||s.ctx||{},o.ctx=void 0,a=s.cvtArgs("true"!==t&&t)[0],a=r&&e._.onRender?e._.onRender(a,e,s):a),void 0!=a?a:""}function b(t){var e=this,o=e.tagCtx,n=o.view,i=o.args;return t=t||e.convert,t=t&&(""+t===t?n.getRsc("converters",t)||M("Unknown converter: '"+t+"'"):t),i=i.length||o.index?t?i.slice():i:[n.data],t&&(t.depends&&(e.depends=at.getDeps(e.depends,e,t.depends,t)),i[0]=t.apply(e,i)),i}function g(t,e){for(var o,n,i=this;void 0===o&&i;)n=i.tmpl&&i.tmpl[t],o=n&&n[e],i=i.parent;return o||G[t][e]}function y(t,e,o,n,s,a){var r,c,l,p,d,u,f,h,m,v,b,g,y,w,x,k,_,C="",$=(e=e||Y).linkCtx||0,N=e.ctx,O=o||e.tmpl,j="number"==typeof n&&e.tmpl.bnds[n-1];for("tag"===t._is?(r=t,t=r.tagName,n=r.tagCtxs,r.template):(c=e.getRsc("tags",t)||M("Unknown tag: {{"+t+"}} "),c.template),void 0!==a?(C+=a,n=a=[{props:{},args:[]}]):j&&(n=j(e.data,e,at)),f=n.length,u=0;f>u;u++)m=n[u],(!$||!$.tag||u&&!$.tag._.inline||r._er)&&((b=O.tmpls&&m.tmpl)&&(b=m.content=O.tmpls[b-1]),m.index=u,m.tmpl=b,m.render=T,m.view=e,m.ctx=z(m.ctx,N)),(o=m.props.tmpl)&&(m.tmpl=e.getTmpl(o)),r||(r=new c._ctr,g=!!r.init,r.parent=d=N&&N.tag,r.tagCtxs=n,_=r.dataMap,$&&(r._.inline=!1,$.tag=r,r.linkCtx=$),(r._.bnd=j||$.fn)?r._.arrVws={}:r.dataBoundOnly&&M("{^{"+t+"}} tag must be data-bound")),n=r.tagCtxs,_=r.dataMap,m.tag=r,_&&n&&(m.map=n[u].map),r.flow||(v=m.ctx=m.ctx||{},l=r.parents=v.parentTags=N&&z(v.parentTags,N.parentTags)||{},d&&(l[d.tagName]=d),l[r.tagName]=v.tag=r);if(!(r._er=a)){for(i(r,n[0]),r.rendering={},u=0;f>u;u++)m=r.tagCtx=n[u],k=m.props,x=r.cvtArgs(),(y=k.dataMap||_)&&(x.length||k.dataMap)&&((w=m.map)&&w.src===x[0]&&!s||(w&&w.src&&w.unmap(),w=m.map=y.map(x[0],k,void 0,!r._.bnd)),x=[w.tgt]),r.ctx=m.ctx,u||(g&&(r.template,r.init(m,$,r.ctx),g=void 0),$&&($.attr=r.attr=$.attr||r.attr),p=r.attr,r._.noVws=p&&p!==Tt),h=void 0,r.render&&(h=r.render.apply(r,x)),x.length||(x=[e]),void 0===h&&(h=m.render(x[0],!0)||(s?void 0:"")),C=C?C+(h||""):h;r.rendering=void 0}return r.tagCtx=n[0],r.ctx=r.tagCtx.ctx,r._.noVws&&r._.inline&&(C="text"===p?nt.html(C):""),j&&e._.onRender?e._.onRender(C,e,r):C}function w(t,e,o,n,i,s,a,r){var c,l,p,d=this,f="array"===e;d.content=r,d.views=f?[]:{},d.parent=o,d.type=e||"top",d.data=n,d.tmpl=i,p=d._={key:0,useKey:f?0:1,id:""+At++,onRender:a,bnds:{}},d.linked=!!a,o?(c=o.views,l=o._,l.useKey?(c[p.key="_"+l.useKey++]=d,d.index=Rt,d.getIndex=u):c.length===(p.key=d.index=s)?c.push(d):c.splice(s,0,d),d.ctx=t||o.ctx):d.ctx=t}function x(t){var e,o,n,i,s,a,r;for(e in Lt)if(s=Lt[e],(a=s.compile)&&(o=t[e+"s"]))for(n in o)i=o[n]=a(n,o[n],t,0),i._is=e,i&&(r=at.onStore[e])&&r(n,i,a)}function k(t,e,o){function i(){var e=this;e._={inline:!0,unlinked:!0},e.tagName=t}var s,a,r,c=new at._tg;if(tt(e)?e={depends:e.depends,render:e}:""+e===e&&(e={template:e}),a=e.baseTag){e.flow=!!e.flow,e.baseTag=a=""+a===a?o&&o.tags[a]||st[a]:a,c=l(c,a);for(r in e)c[r]=n(a[r],e[r])}else c=l(c,e);return void 0!==(s=c.template)&&(c.template=""+s===s?ot[s]||ot(s):s),!1!==c.init&&((i.prototype=c).constructor=c._ctr=i),o&&(c._parentTmpl=o),c}function _(t){return this.base.apply(this,t)}function C(t,o,n,i){function s(o){var s,r;if(""+o===o||o.nodeType>0&&(a=o)){if(!a)if(/^\.\/[^\\:*?"<>]*$/.test(o))(r=ot[t=t||o])?o=r:a=document.getElementById(o);else if(e.fn&&!X.test(o))try{a=e(document).find(o)[0]}catch(t){}a&&(i?o=a.innerHTML:(s=a.getAttribute(Kt),s?s!==Mt?(o=ot[s],delete ot[s]):e.fn&&(o=e.data(a)[Mt]):(t=t||(e.fn?Mt:o),o=C(t,a.innerHTML,n,i)),o.tmplName=t=t||s,t!==Mt&&(ot[t]=o),a.setAttribute(Kt,t),e.fn&&e.data(a,Mt,o))),a=void 0}else o.fn||(o=void 0);return o}var a,r,c=o=o||"";return 0===i&&(i=void 0,c=s(c)),i=i||(o.markup?o:{}),i.tmplName=t,n&&(i._parentTmpl=n),!c&&o.markup&&(c=s(o.markup))&&c.fn&&(c=c.markup),void 0!==c?(c.fn||o.fn?c.fn&&(r=c):(o=j(c,i),I(c.replace(kt,"\\$&"),o)),r||(x(i),r=l(function(){return o.render.apply(o,arguments)},o)),t&&!n&&t!==Mt&&(It[t]=r),r):void 0}function $(t,o){return e.isFunction(t)?t.call(o):t}function N(t){var e,o=[],n=t.length;for(e=0;n>e;e++)o.push(t[e].unmap());return o}function O(t,o){function n(t){p.apply(this,t)}function i(){return new n(arguments)}function s(t,e){var o,n,i,s,a,r=u.length;for(o=0;r>o;o++)s=u[o],n=void 0,s+""!==s&&(n=s,s=n.getter),void 0===(a=t[s])&&n&&void 0!==(i=n.defaultVal)&&(a=$(i,t)),e(a,n&&d[n.type],s)}function a(o){var n,i,a,l=o=o+""===o?JSON.parse(o):o,p=[];if(e.isArray(o)){for(i=(o=o||[]).length,n=0;i>n;n++)p.push(this.map(o[n]));return p._is=t,p.unmap=c,p.merge=r,p}if(o){s(o,function(t,e){e&&(t=e.map(t)),p.push(t)}),l=this.apply(this,p);for(a in o)a===Z||w[a]||(l[a]=o[a])}return l}function r(t){t=t+""===t?JSON.parse(t):t;var o,n,a,r,c,l,p,d,u,f,m=this;if(e.isArray(m)){for(d={},f=[],a=t.length,r=m.length,o=0;a>o;o++){for(u=t[o],p=!1,n=0;r>n&&!p;n++)d[n]||(l=m[n],h&&(d[n]=p=h+""===h?u[h]&&(w[h]?l[h]():l[h])===u[h]:h(l,u)));p?(l.merge(u),f.push(l)):f.push(i.map(u))}y?y(m).refresh(f,!0):m.splice.apply(m,[0,m.length].concat(f))}else{s(t,function(t,e,o){e?m[o]().merge(t):m[o](t)});for(c in t)c===Z||w[c]||(m[c]=t[c])}}function c(){var t,o,n,i,s,a,r=this;if(e.isArray(r))return N(r);for(t={},i=u.length,n=0;i>n;n++)o=u[n],s=void 0,o+""!==o&&(s=o,o=s.getter),a=r[o](),t[o]=s&&a&&d[s.type]?e.isArray(a)?N(a):a.unmap():a;for(o in r)"_is"===o||w[o]||o===Z||"_"===o.charAt(0)&&w[o.slice(1)]||e.isFunction(r[o])||(t[o]=r[o]);return t}var l,p,d=this,u=o.getters,f=o.extend,h=o.id,m=e.extend({_is:t||"unnamed",unmap:c,merge:r},f),v="",b="",g=u?u.length:0,y=e.observable,w={};for(n.prototype=m,l=0;g>l;l++)!function(t){t=t.getter||t,w[t]=l+1;var e="_"+t;v+=(v?",":"")+t,b+="this."+e+" = "+t+";\n",m[t]=m[t]||function(o){return arguments.length?void(y?y(this).setProperty(t,o):this[e]=o):this[e]},y&&(m[t].set=m[t].set||function(t){this[e]=t})}(u[l]);return p=new Function(v,b.slice(0,-1)),p.prototype=m,m.constructor=p,i.map=a,i.getters=u,i.extend=f,i.id=h,i}function j(t,o){var n,i=ct._wm||{},s=l({tmpls:[],links:{},bnds:[],_is:"template",render:T},o);return s.markup=t,o.htmlTag||(n=$t.exec(t),s.htmlTag=n?n[1].toLowerCase():""),(n=i[s.htmlTag])&&n!==i.div&&(s.markup=e.trim(s.markup)),s}function A(t){lt[t]=function(e){return arguments.length?(rt[t]=e,lt):rt[t]}}function E(t){function e(e,o){this.tgt=t.getTgt(e,o)}return tt(t)&&(t={getTgt:t}),t.baseMap&&(t=l(l({},t.baseMap),t)),t.map=function(t,o){return new e(t,o)},t}function T(t,e,o,n,i,s){var a,r,c,l,p,d,u,f,h=n,m="";if(!0===e?(o=e,e=void 0):typeof e!==Pt&&(e=void 0),(c=this.tag)?(p=this,h=h||p.view,l=h.getTmpl(c.template||p.tmpl),arguments.length||(t=h)):l=this,l){if(!h&&t&&"view"===t._is&&(h=t),h&&t===h&&(t=h.data),d=!h,vt=vt||d,h||((e=e||{}).root=t),!vt||ct.useViews||l.useViews||h&&h!==Y)m=P(l,t,e,o,h,i,s,c);else{if(h?(u=h.data,f=h.index,h.index=Rt):(h=Y,h.data=t,h.ctx=e),et(t)&&!o)for(a=0,r=t.length;r>a;a++)h.index=a,h.data=t[a],m+=l.fn(t[a],h,at);else h.data=t,m+=l.fn(t,h,at);h.data=u,h.index=f}d&&(vt=void 0)}return m}function P(t,e,o,n,i,s,a,r){function c(t){(x=l({},o))[y]=t}var p,d,u,f,h,m,v,b,g,y,x,k,_="";if(r&&(g=r.tagName,k=r.tagCtx,o=o?z(o,r.ctx):r.ctx,t===i.content?v=t!==i.ctx._wrp?i.ctx._wrp:void 0:t!==k.content?t===r.template?(v=k.tmpl,o._wrp=k.content):v=k.content||i.content:v=i.content,!1===k.props.link&&(o=o||{},o.link=!1),(y=k.props.itemVar)&&("~"!==y.charAt(0)&&R("Use itemVar='~myItem'"),y=y.slice(1))),i&&(a=a||i._.onRender,o=z(o,i.ctx)),!0===s&&(m=!0,s=0),a&&(o&&!1===o.link||r&&r._.noVws)&&(a=void 0),b=a,!0===a&&(b=void 0,a=i._.onRender),o=t.helpers?z(t.helpers,o):o,x=o,et(e)&&!n)for(u=m?i:void 0!==s&&i||new w(o,"array",i,e,t,s,a),i&&i._.useKey&&(u._.bnd=!r||r._.bnd&&r),y&&(u.it=y),y=u.it,p=0,d=e.length;d>p;p++)y&&c(e[p]),f=new w(x,"item",u,e[p],t,(s||0)+p,a,v),h=t.fn(e[p],f,at),_+=u._.onRender?u._.onRender(h,f):h;else y&&c(e),u=m?i:new w(x,g||"data",i,e,t,s,a,v),r&&!r.flow&&(u.tag=r),_+=t.fn(e,u,at);return b?b(_,u):_}function K(t,e,o){var n=void 0!==o?tt(o)?o.call(e.data,t,e):o||"":"{Error: "+t.message+"}";return rt.onError&&void 0!==(o=rt.onError.call(e.data,t,o&&n,e))&&(n=o),e&&!e.linkCtx?nt.html(n):n}function M(t){throw new at.Err(t)}function R(t){M("Syntax error\n"+t)}function I(t,e,o,n,i){function s(e){(e-=m)&&b.push(t.substr(m,e).replace(wt,"\\n"))}function a(e,o){e&&(e+="}}",R((o?"{{"+o+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+t))}function r(r,c,l,u,h,y,w,x,k,_,C,$){(w&&c||k&&!l||x&&":"===x.slice(-1)||_)&&R(r),y&&(h=":",u=Tt),k=k||o&&!i;var N=(c||o)&&[[]],O="",j="",A="",E="",T="",P="",K="",M="",I=!k&&!h;l=l||(x=x||"#data",h),s($),m=$+r.length,w?f&&b.push(["*","\n"+x.replace(/^:/,"ret+= ").replace(xt,"$1")+";\n"]):l?("else"===l&&(Ct.test(x)&&R('for "{{else if expr}}" use "{{else expr}}"'),N=g[7]&&[[]],g[8]=t.substring(g[8],$),g=v.pop(),b=g[2],I=!0),x&&H(x.replace(wt," "),N,e).replace(_t,function(t,e,o,n,i,s,a,r){return n="'"+i+"':",a?(j+=s+",",E+="'"+r+"',"):o?(A+=n+s+",",P+=n+"'"+r+"',"):e?K+=s:("trigger"===i&&(M+=s),O+=n+s+",",T+=n+"'"+r+"',",d=d||Ot.test(i)),""}).slice(0,-1),N&&N[0]&&N.pop(),p=[l,u||!!n||d||"",I&&[],F(E||(":"===l?"'#data',":""),T,P),F(j||(":"===l?"data,":""),O,A),K,M,N||0],b.push(p),I&&(v.push(g),g=p,g[8]=m)):C&&(a(C!==g[0]&&"else"!==g[0]&&C,g[0]),g[8]=t.substring(g[8],$),g=v.pop()),a(!g&&C),b=g[2]}var c,l,p,d,u,f=rt.allowCode||e&&e.allowCode||!0===lt.allowCode,h=[],m=0,v=[],b=h,g=[,,h];if(f&&(e.allowCode=f),o&&(void 0!==n&&(t=t.slice(0,-n.length-2)+ft),t=pt+t+ft),a(v[0]&&v[0][2].pop()[0]),t.replace(W,r),s(t.length),(m=h[h.length-1])&&a(""+m!==m&&+m[8]===m[8]&&m[0]),o){for(l=U(h,t,o),u=[],c=h.length;c--;)u.unshift(h[c][7]);q(l,u)}else l=U(h,e);return l}function q(t,e){var o,n,i=0,s=e.length;for(t.deps=[];s>i;i++){n=e[i];for(o in n)"_jsvto"!==o&&n[o].length&&(t.deps=t.deps.concat(n[o]))}t.paths=n}function F(t,e,o){return[t.slice(0,-1),e.slice(0,-1),o.slice(0,-1)]}function L(t,e){return"\n\t"+(e?e+":{":"")+"args:["+t[0]+"]"+(t[1]||!e?",\n\tprops:{"+t[1]+"}":"")+(t[2]?",\n\tctx:{"+t[2]+"}":"")}function H(t,e,o){function n(n,b,g,y,w,x,k,_,C,$,N,O,j,A,E,T,P,K,M,q){function F(t,o,n,a,r,c,d,u){var f="."===n;if(n&&(w=w.slice(o.length),/^\.?constructor$/.test(u||w)&&R(t),f||(t=(a?'view.hlp("'+a+'")':r?"view":"data")+(u?(c?"."+c:a?"":r?"":"."+n)+(d||""):(u=a?"":r?c||"":n,"")),t+=u?"."+u:"",t=o+("view.data"===t.slice(0,9)?t.slice(5):t)),l)){if(U="linkTo"===i?s=e._jsvto=e._jsvto||[]:p.bd,z=f&&U[U.length-1]){if(z._jsv){for(;z.sb;)z=z.sb;z.bnd&&(w="^"+w.slice(1)),z.sb=w,z.bnd=z.bnd||"^"===w.charAt(0)}}else U.push(w);v[h]=M+(f?1:0)}return t}(y=l&&y)&&!_&&(w=y+w),x=x||"",g=g||b||O,w=w||C;var L,H,U,z,B,S=")";if("["===($=$||P||"")&&($="[j._sq(",S=")]"),!k||c||r){if(l&&T&&!c&&!r&&(!i||a||s)&&(L=v[h-1],q.length-1>M-(L||0))){if(L=q.slice(L,M+n.length),!0!==H)if(U=s||d[h-1].bd,(z=U[U.length-1])&&z.prm){for(;z.sb&&z.sb.prm;)z=z.sb;B=z.sb={path:z.sb,bnd:z.bnd}}else U.push(B={path:U.pop()});(H=f[T=dt+":"+L+" onerror=''"+ut])||(f[T]=!0,f[T]=H=I(T,o,!0)),!0!==H&&B&&(B._jsv=H,B.prm=p.bd,B.bnd=B.bnd||B.path&&B.path.indexOf("^")>=0)}return c?(c=!j,c?n:O+'"'):r?(r=!A,r?n:O+'"'):(g?(v[h]=M++,p=d[++h]={bd:[]},g):"")+(K?h?"":(u=q.slice(u,M),(i?(i=a=s=!1,"\b"):"\b,")+u+(u=M+n.length,l&&e.push(p.bd=[]),"\b")):_?(h&&R(t),l&&e.pop(),i=w,a=y,u=M+n.length,y&&(l=p.bd=e[i]=[]),w+":"):w?w.split("^").join(".").replace(gt,F)+($?(p=d[++h]={bd:[]},m[h]=S,$):x):x||(E?(E=m[h]||E,m[h]=!1,p=d[--h],E+($?(p=d[++h],m[h]=S,$):"")):N?(m[h]||R(t),","):b?"":(c=j,r=A,'"')))}R(t)}var i,s,a,r,c,l=e&&e[0],p={bd:l},d={0:p},u=0,f=o?o.links:l&&(l.links=l.links||{}),h=0,m={},v={},b=(t+(o?" ":"")).replace(yt,n);return!h&&b||R(t)}function U(t,e,o){var n,i,s,a,r,c,l,p,d,u,f,h,m,v,b,g,y,w,x,k,_,C,$,N,O,A,E,T,P,K=0,M=ct.useViews||e.useViews||e.tags||e.templates||e.helpers||e.converters,I="",F={},H=t.length;for(""+e===e?(y=o?'data-link="'+e.replace(wt," ").slice(1,-1)+'"':e,e=0):(y=e.tmplName||"unnamed",e.allowCode&&(F.allowCode=!0),e.debug&&(F.debug=!0),u=e.bnds,g=e.tmpls),n=0;H>n;n++)if(""+(i=t[n])===i)I+='\n+"'+i+'"';else if("*"===(s=i[0]))I+=";\n"+i[1]+"\nret=ret";else{if(a=i[1],k=!o&&i[2],r=L(i[3],"params")+"},"+L(h=i[4]),E=i[5],P=i[6],_=i[8]&&i[8].replace(xt,"$1"),(N="else"===s)?f&&f.push(i[7]):(K=0,u&&(f=i[7])&&(f=[f],K=u.push(1))),M=M||h[1]||h[2]||f||/view.(?!index)/.test(h[0]),(O=":"===s)?a&&(s=a===Tt?">":a+s):(k&&(w=j(_,F),w.tmplName=y+"/"+s,w.useViews=w.useViews||M,U(k,w),M=w.useViews,g.push(w)),N||(x=s,M=M||s&&(!st[s]||!st[s].flow),$=I,I=""),C=t[n+1],C=C&&"else"===C[0]),T=E?";\ntry{\nret+=":"\n+",m="",v="",O&&(f||P||a&&a!==Tt)){if(A=new Function("data,view,j,u"," // "+y+" "+K+" "+s+"\nreturn {"+r+"};"),A._er=E,A._tag=s,o)return A;q(A,f),d=!0,m=(b='c("'+a+'",view,')+K+",",v=")"}if(I+=O?(o?(E?"try{\n":"")+"return ":T)+(d?(d=void 0,M=p=!0,b+(f?(u[K-1]=A,K):"{"+r+"}")+")"):">"===s?(l=!0,"h("+h[0]+")"):(!0,"((v="+h[0]+")!=null?v:"+(o?"null)":'"")'))):(c=!0,"\n{view:view,tmpl:"+(k?g.length:"0")+","+r+"},"),x&&!C){if(I="["+I.slice(0,-1)+"]",b='t("'+x+'",view,this,',o||f){if(I=new Function("data,view,j,u"," // "+y+" "+K+" "+x+"\nreturn "+I+";"),I._er=E,I._tag=x,f&&q(u[K-1]=I,f),o)return I;m=b+K+",undefined,",v=")"}I=$+T+b+(K||I)+")",f=0,x=0}E&&(M=!0,I+=";\n}catch(e){ret"+(o?"urn ":"+=")+m+"j._err(e,view,"+E+")"+v+";}"+(o?"":"ret=ret"))}I="// "+y+"\nvar v"+(c?",t=j._tag":"")+(p?",c=j._cnvt":"")+(l?",h=j._html":"")+(o?";\n":',ret=""\n')+(F.debug?"debugger;":"")+I+(o?"\n":";\nreturn ret;"),!1!==rt.debugMode&&(I="try {\n"+I+"\n}catch(e){\nreturn j._err(e, view);\n}");try{I=new Function("data,view,j,u",I)}catch(t){R("Compiled template code:\n\n"+I+'\n: "'+t.message+'"')}return e&&(e.fn=I,e.useViews=!!M),I}function z(t,e){return t&&t!==e?e?l(l({},e),t):t:e&&l({},e)}function B(t){return Et[t]||(Et[t]="&#"+t.charCodeAt(0)+";")}function S(t){var e,o,n=[];if(typeof t===Pt)for(e in t)o=t[e],e===Z||tt(o)||n.push({key:e,prop:o});return n}function D(t,o,n){var i=this.jquery&&(this[0]||M('Unknown template: "'+this.selector+'"')),s=i.getAttribute(Kt);return T.call(s?e.data(i)[Mt]:ot(i),t,o,n)}function Q(t){return void 0!=t?Nt.test(t)&&(""+t).replace(jt,B)||t:""}var V=!1===e;e=e&&e.fn?e:t.jQuery;var J,W,X,Y,G,Z,tt,et,ot,nt,it,st,at,rt,ct,lt,pt,dt,ut,ft,ht,mt,vt,bt="v0.9.78",gt=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,yt=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,wt=/[ \t]*(\r\n|\n|\r)/g,xt=/\\(['"])/g,kt=/['"\\]/g,_t=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,Ct=/^if\s/,$t=/<(\w+)[>\s]/,Nt=/[\x00`><\"'&=]/,Ot=/^on[A-Z]|^convert(Back)?$/,jt=/[\x00`><"'&=]/g,At=0,Et={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},Tt="html",Pt="object",Kt="data-jsv-tmpl",Mt="jsvTmpl",Rt="For #index in nested block use #getIndex().",It={},qt=t.jsrender,Ft=qt&&e&&!e.render,Lt={template:{compile:C},tag:{compile:k},viewModel:{compile:O},helper:{},converter:{}};if(G={jsviews:bt,sub:{View:w,Err:c,tmplFn:I,parse:H,extend:l,extendCtx:z,syntaxErr:R,onStore:{},addSetting:A,settings:{allowCode:!1},advSet:a,_ths:i,_tg:function(){},_cnvt:v,_tag:y,_er:M,_err:K,_html:Q,_sq:function(t){return"constructor"===t&&R(""),t}},settings:{delimiters:p,advanced:function(t){return t?(l(ct,t),at.advSet(),lt):ct}},map:E},(c.prototype=new Error).constructor=c,u.depends=function(){return[this.get("item"),"index"]},f.depends="index",w.prototype={get:d,getIndex:f,getRsc:g,getTmpl:m,hlp:h,_is:"view"},at=G.sub,lt=G.settings,!(qt||e&&e.render)){for(J in Lt)!function(t,e){function o(i,s,a){var r,c,l,p;if(i&&typeof i===Pt&&!i.nodeType&&!i.markup&&!i.getTgt&&!("viewModel"===t&&i.getters||i.extend)){for(l in i)o(l,i[l],s);return s||G}return void 0===s&&(s=i,i=void 0),i&&""+i!==i&&(a=s,s=i,i=void 0),p=a?"viewModel"===t?a:a[n]=a[n]||{}:o,c=e.compile,null===s?i&&delete p[i]:(s=c?c.call(p,i,s,a,0):s,i&&(p[i]=s)),c&&s&&(s._is=t),s&&(r=at.onStore[t])&&r(i,s,c),s}var n=t+"s";G[n]=o}(J,Lt[J]);nt=G.converters,it=G.helpers,st=G.tags,at._tg.prototype={baseApply:_,cvtArgs:b},Y=at.topView=new w,e?(e.fn.render=D,Z=e.expando,e.observable&&(l(at,e.views.sub),G.map=e.views.map)):(e={},V&&(t.jsrender=e),e.renderFile=e.__express=e.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},e.isFunction=function(t){return"function"==typeof t},e.isArray=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},at._jq=function(t){t!==e&&(l(t,e),e=t,e.fn.render=D,delete e.jsrender,Z=e.expando)},e.jsrender=bt),(rt=at.settings).allowCode=!1,tt=e.isFunction,et=e.isArray,e.render=It,e.views=G,e.templates=ot=G.templates;for(mt in rt)A(mt);(lt.debugMode=function(t){return void 0===t?rt.debugMode:(rt.debugMode=t,rt.onError=t+""===t?new Function("","return '"+t+"';"):tt(t)?t:void 0,lt)})(!1),ct=rt.advanced={useViews:!1,_jsv:!1},st({if:{render:function(t){var e=this,o=e.tagCtx;return e.rendering.done||!t&&(arguments.length||!o.index)?"":(e.rendering.done=!0,e.selected=o.index,o.render(o.view,!0))},flow:!0},for:{render:function(t){var e,o=!arguments.length,n=this,i=n.tagCtx,s="",a=0;return n.rendering.done||(void 0!==(e=o?i.view.data:t)&&(s+=i.render(e,o),a+=et(e)?e.length:1),(n.rendering.done=a)&&(n.selected=i.index)),s},flow:!0},props:{baseTag:"for",dataMap:E(S),flow:!0},include:{flow:!0},"*":{render:s,flow:!0},":*":{render:s,flow:!0},dbg:it.dbg=nt.dbg=r}),nt({html:Q,attr:Q,url:function(t){return void 0!=t?encodeURI(""+t):null===t?t:""}})}return rt=at.settings,lt.delimiters("{{","}}","^"),Ft&&qt.views.sub._jq(e),e||qt},window);var cuHandler={ismobile:/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),currentResponse:!1,loadRemoteDialog:function(launcher){var url=void 0!=$(launcher).attr("href")&&"#"!=$(launcher).attr("href")?$(launcher).attr("href"):$(launcher).data("url"),handler=$(launcher).data("handler"),window_id=$(launcher).data("window-id"),params={CUTOKEN_REQUEST:$("#cu-token").val()};return 0!=params&&(cuHandler.showLoader(),$.get(url,params,function(response){return!!cuHandler.retrieveAjax(response)&&(void 0==handler&&""!=handler?(cuHandler.closeLoader(),cuHandler.modal.dialog({message:response.content,title:response.message,icon:void 0!=response.icon?response.icon:"",width:void 0!=response.width?response.width:"",id:void 0!=response.id?response.id:window_id,animate:!1,color:void 0!=response.color?response.color:"",closeButton:void 0==response.closeButton||response.closeButton,helpButton:void 0!=response.helpButton&&response.helpButton,helpUrl:void 0!=response.helpUrl?response.helpUrl:"#",solid:void 0!=response.solid})):(cuHandler.closeLoader(),eval(handler+"(response, launcher);")),$(".cu-data-table").each(function(){cuHandler.createDataTable($(this))}),cuHandler.checkAjaxAction(response),!1)},"json"),!1)},submitAjaxForm:function(t){if(!$(t).valid())return!1;cuHandler.showLoader();var e=t.serialize();e+="&CUTOKEN_REQUEST="+$("#cu-token").val();var o=t.attr("action");return"post"==t.attr("method")?$.post(o,e,cuHandler.retrieveAjax,"json"):$.get(o,e,cuHandler.retrieveAjax,"json"),!1},requestAjax:function(t,e){return $(t).cuSpinner({icon:"svg-rmcommon-spinner-14"}),void 0!=e&&(void 0!=e.url&&(void 0==e.parameters&&(e.parameters={}),e.parameters.CUTOKEN_REQUEST=$("#cu-token").val(),void(void 0==e.method||"post"==e.method?$.post(e.url,e.parameters,cuHandler.retrieveAjax,"json"):$.get(e.url,e.parameters,cuHandler.retrieveAjax,"json"))))},isDisabled:function(t){return!(!$(t).hasClass("disabled")&&void 0==$(t).attr("disabled"))},retrieveAjax:function(t,e){return e=void 0==e||e,this.currentResponse=t,"error"==t.type&&(void 0!=t.modal_message?bootbox.alert({message:t.message}):void 0!=t.notify&&void 0!=t.message?(cuHandler.notify({title:void 0==t.notify.title?"":t.notify.title,type:void 0==t.notify.type?"alert-info":t.notify.type,icon:void 0==t.notify.icon?"svg-rmcommon-info-solid":t.notify.icon,text:void 0==t.notify.text?t.message:t.notify.text}),t.notify=void 0):e&&alert(t.message)),void 0!=t.token&&""!=t.token&&$("#cu-token").val(t.token),cuHandler.closeLoader(),cuHandler.checkAjaxAction(t),"error"!=t.type},checkAjaxAction:function(data){void 0!=data.showMessage&&alert(data.message),void 0!=data.notify&&void 0!=data.message&&this.notify({title:void 0==data.notify.title?null:data.notify.title,type:void 0==data.notify.type?"alert-info":data.notify.type,icon:void 0==data.notify.icon?"svg-rmcommon-info-solid":data.notify.icon,text:void 0==data.notify.text?data.message:data.notify.text}),void 0!=data.closeWindow&&$(data.closeWindow).modal("hide"),void 0!=data.runHandler&&eval(data.runHandler+"(data)"),void 0!=data.goto&&(window.location.href=data.goto),void 0!=data.function&&eval(data.function),void 0!=data.openDialog&&cuHandler.modal.dialog({message:data.content,title:data.message,icon:void 0!=data.icon?data.icon:"",width:void 0!=data.width?data.width:"",owner:void 0!=data.owner?data.owner:"",id:void 0!=data.windowId?data.windowId:"",animate:!1,closeButton:void 0==data.closeButton||data.closeButton,helpButton:void 0!=data.helpButton&&data.helpButton,helpUrl:void 0!=data.helpUrl?data.helpUrl:"#",color:void 0!=data.color?data.color:"",solid:void 0!=data.solid}),void 0!=data.dynamicTable&&$(data.dynamicTable.table).dynamicTable(data.dynamicTable.action,{}),void 0==data.reload||window.location.reload(!0)},showLoader:function(){$(".cu-window-loader").hide(),$(".cu-window-blocker").hide();var t='<div class="cu-window-blocker"></div>';t+='<div class="cu-window-loader"><div class="loader-container text-center"><button class="close" type="button">&times;</button><span><span class="cu-icon cu-spinner" style="animation: cu-spin 1s infinite steps(10)"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><path d="M5.233 2.056C5.23 1.063 6.033.253 7.027.25c.994-.003 1.803.8 1.806 1.794.004.994-.8 1.802-1.794 1.806-1 .003-1.81-.8-1.81-1.794zm3.824 1.568c-.003-.993.8-1.802 1.792-1.806.99-.003 1.8.8 1.8 1.793 0 1-.8 1.81-1.8 1.81-1 .01-1.8-.8-1.81-1.79zm2.495 3.81c-.002-.497.398-.9.896-.903.497 0 .902.4.904.9 0 .5-.402.9-.897.91-.498.01-.902-.39-.903-.89zm-1.57 3.824c-.003-.496.4-.9.895-.903.498 0 .903.4.904.897.01.498-.4.9-.89.904-.49.002-.9-.4-.9-.898zM6.17 12.853c-.002-.496.4-.9.897-.902.497 0 .9.4.903.9.002.5-.4.9-.897.91-.498.01-.902-.4-.903-.89zm-3.824-1.57c-.002-.495.4-.9.897-.902.496 0 .9.4.902.9.002.5-.4.9-.896.91-.5 0-.91-.4-.91-.9zM1.87 3.65c-.003-.746.6-1.352 1.345-1.354.746-.002 1.352.6 1.354 1.345 0 .75-.6 1.36-1.35 1.36-.75.01-1.35-.6-1.36-1.34zM.637 7.472c-.002-.56.45-1.014 1.01-1.016.56-.002 1.013.45 1.015 1.01 0 .56-.45 1.014-1.008 1.016S.64 8.03.638 7.472z"/></svg></span> '+cuLanguage.inProgress+"</span></div></div>",$("body").append(t),$(".cu-window-blocker").fadeIn(0,function(){$(".cu-window-loader").fadeIn(1)})},closeLoader:function(){$(".cu-window-loader").fadeOut(1,function(){$(".cu-window-blocker").fadeOut(0,function(){$(".cu-window-loader").remove(),$(".cu-window-blocker").remove()})})},getURI:function(t,e,o,n,i){return this.getControllerURI(t,e,o,n,i)},getControllerURI:function(module,controller,action,zone,params){var url=xoUrl;if(void 0!=cu_modules[module]&&void 0!=controller&&""!=controller)url+="backend"==zone?"/admin":"",url+=cu_modules[module]+"/"+controller+"/"+action+"/";else{if(url+="/modules/"+module,url+="backend"==zone?"/admin":"",""==controller||void 0==controller)return url;url+="/index.php/"+controller+"/"+action+"/"}if(void 0==params)return url;var query="";for(key in params)query+=(""==query?"?":"&")+key+"="+eval("params."+key);return url+query},url:function(t,e){var o=window.location.protocol+"//"+window.location.host;""!=window.location.port&&(o+=":"+window.location.port);var n=xoUrl.replace(o,"");return void 0==t?xoUrl:1==arguments.length||1!=e?xoUrl+t:n+t},createDataTable:function(t){if(!t.hasClass("dataTable")){var e=$(t).data("exclude");void 0!=e&&e.toString().split(",");$(t).dataTable({bProcessing:!0,bServerSide:!0,sAjaxSource:$(t).data("source"),bPaginate:!0})}},runAction:function(e){var action=$(e).data("action");switch(action){case"load-remote-dialog":case"load-module-dialog":cuHandler.loadRemoteDialog(e);break;case"goto":var url=$(e).data("url");void 0==url&&(url=$(e).attr("href"));var retriever=$(e).data("retriever");void 0!=retriever&&(url+=eval(retriever+"(e)")),void 0!=url&&""!=url&&(window.location.href=url);break;case"ajax":var url=""!=$(e).attr("href")?$(e).attr("href"):$(e).data("url");cuHandler.requestAjax(e,{url:url});case"register":alert("Registrando");break;default:if(""==action)return;var parts=action.split(".");if(parts.length<1)return;if(1==parts.length){if(void 0==window[parts[0]])return;return void window[parts[0]]()}if(2==parts.length){if(void 0==window[parts[0]][parts[1]])return;window[parts[0]][parts[1]]()}if(3==parts.length){if(void 0==window[parts[0]][parts[1]][parts[2]])return;window[parts[0]][parts[1]][parts[2]]()}}},enableCommands:function(id_activator,type){var commands=$("*[data-activator='"+id_activator+"']"),total=$("#"+id_activator+" :"+type+":checked").length;$(commands).each(function(index){var required=void 0!=$(this).data("oncount")?$(this).data("oncount"):" >= 1";eval("total "+required)?$(this).enable():$(this).disable()})},getIcon:function(t){var e="svg-"==t.slice(0,4),o=!1,n=!1;if(e||(e=".svg"==t.slice(-4))&&(n=!0),o=null!=t.match(/^(http:\/\/|ftp:\/\/|https:\/\/\|\/\/)/i),e&&!n){var i=t.split("-");if(i.length<3)return this.url("modules/rmcommon/icons/noicon.svg");var s=t.slice(5+i[1].length),a=this.url("modules/rmcommon/icons/"+s+".svg");return void 0==iconsProviders?a:iconsProviders.hasOwnProperty(i[1])?iconsProviders[i[1]]+"/"+s+".svg":a}if(n&&!o)return this.url(t);var r=[".jpg",".gif",".png","jpeg"],c=t.slice(-4);return r.indexOf(c)||o?t:'<span class="'+t+'"></span>'},loadIcon:function(t,e,o){if(arguments.length<1)return!1;o=2==arguments.length||1!=arguments.length&&o;var n=this.getIcon(t),i=".svg"==n.slice(-4),s="<span"==n.slice(0,5);if(o)a=e.find(".cu-icon");else var a=$("<span />",{class:"cu-icon"});if((void 0==a||a.length<=0)&&(o=!1,a=$("<span />",{class:"cu-icon"})),i)a.html("").load(n);else if(s)a.html("").append(n);else{var r=$("<img>").attr("src",n);a.html("").append(r)}return!o&&arguments.length>1&&$(e).append(a),a},modal:bootbox,notify:function(t){return new PNotify(t)},imagesManager:function(t){var e='<div id="blocker-'+t.idContainer+'" class="mgr_blocker"></div><div id="window-'+t.idContainer+'" class="imgmgr_container">';e+='<div class="window-title cu-titlebar"><button type="button" class="close">&times;</button>'+t.title+"</div>",e+='<iframe src="'+xoUrl+"/modules/rmcommon/include/tiny-images.php?type="+t.type+"&amp;idcontainer="+t.idContainer+"&amp;editor="+t.idContainer+"&amp;target="+t.target+"&amp;&amp;multi="+t.multiple+'" name="image"></iframe>',e+="</div>",$("body").append(e),$("#blocker-"+t.idContainer).fadeIn("fast",function(){$("body").css("overflow","hidden"),$("#window-"+t.idContainer).fadeIn("fast",function(){})}),$("#blocker-"+t.idContainer+", #window-"+t.idContainer+" .window-title .close").click(function(){$("#window-"+t.idContainer).fadeOut("fast",function(){$("#blocker-"+t.idContainer).fadeOut("fast",function(){$("body").css("overflow","auto"),$("#window-"+t.idContainer).remove(),$("#blocker-"+t.idContainer).remove()})})})},template:function(t,e){return $.templates(t).render(e)}};Number.prototype.formatMoney=function(t,e,o){var n=this,t=isNaN(t=Math.abs(t))?2:t,e=void 0==e?".":e,o=void 0==o?",":o,i=n<0?"-":"",s=parseInt(n=Math.abs(+n||0).toFixed(t))+"",a=(a=s.length)>3?a%3:0;return i+(a?s.substr(0,a)+o:"")+s.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+o)+(t?e+Math.abs(n-s).toFixed(t).slice(2):"")},jQuery.fn.enable=function(){this.each(function(){jQuery(this).removeAttr("disabled"),jQuery(this).removeClass("disabled")})},jQuery.fn.disable=function(){this.each(function(){jQuery(this).prop("disabled",!0),jQuery(this).addClass("disabled")})},$(document).ready(function(){var t="";if($("body").on("click","*[data-action]",function(t){return $(this).is(":disabled")||$(this).attr("disabled")||$(this).hasClass("disabled")?($(t).stopPropagation(),!1):(cuHandler.runAction($(this)),!1)}),$("body").on("submit",'form[data-type="ajax"]',function(){return cuHandler.submitAjaxForm($(this)),!1}),$("body").on("submit",'form[data-type="no-submit"]',function(){return!1}),$("body").on("click",".cu-window-loader .close",function(){cuHandler.closeLoader()}),$(".cu-data-table").each(function(){cuHandler.createDataTable($(this))}),$("*[data-rel='tooltip']").tooltip(),$("body").on("change",".activator-container :checkbox[data-switch], .activator-container :radio[data-switch]",function(){event.stopPropagation();var t=$(this).parents(".activator-container").attr("id");cuHandler.enableCommands(t,$(this).attr("type")),"radio"==$(this).attr("type")&&$(this).parents(".activator-container").find(".tr-checked").removeClass("tr-checked"),$(this).is(":checked")?$(this).parents("tr").addClass("tr-checked"):$(this).parents("tr").removeClass("tr-checked")}),$("body").on("change",":checkbox[data-checkbox]",function(){var t=$(this).data("checkbox");if(void 0!=t){$(":checkbox[data-oncheck='"+t+"']").prop("checked",$(this).prop("checked")).change();var e=$(this).parents(".activator-container");e.length>0&&cuHandler.enableCommands(e.attr("id"),"checkbox")}}),$("body").on("change",":checkbox",function(){if(!this.hasAttribute("data-checkbox")&&this.hasAttribute("data-oncheck")){$(":checkbox[data-oncheck='"+$(this).data("oncheck")+"']");var t=$(":checkbox[data-oncheck='"+$(this).data("oncheck")+"']:checked"),e=$(":checkbox[data-checkbox='"+$(this).data("oncheck")+"']");t.length<=0?$(e).removeAttr("checked"):t.length>0&&$(e).prop("checked","checked")}}),1==$("*[data-news='load']").length||$("*[data-boxes='load']").length>0){var e=$("*[data-news='load']");if(e.length<=0&&(e=$("*[data-boxes='load']")),e.length<=0)return!1;var o=e.data("module"),n=$(e.data("target"));void 0!=n&&n.html('<div class="text-success"><span class="fa fa-spinner fa-pulse"></span> '+cuLanguage.downloadNews+"</div>");var s=$("*[data-boxes='load']"),a=$("html").attr("lang");a=void 0==a?"en":a;var r={module:o,CU_TOKEN:$("#cu-token").val(),lang:a};$.get(xoUrl+"/modules/rmcommon/ajax/module-info.php",r,function(t){if("error"!=t.type){if(void 0!=t.news&&void 0!=n){for(news=$("<ul>").addClass("cu-ajax-news list-unstyled"),i=0;i<t.news.length;i++){var e="<li><small>"+t.news[i].date+'</small><h5><a href="'+t.news[i].link+'" target="_blank">'+t.news[i].title+"</a></h5>";e+='<p class="help-block">'+t.news[i].content+"</p></li>",news.append(e)}n.html("").append(news),news.fadeIn("fast",function(){$('html.dashboard [data-container="dashboard"]').trigger("containerUpdated")})}if(void 0!=t.boxes&&void 0!=s)for(i=0;i<t.boxes.length;i++){if(void 0==t.boxes[i].size||t.boxes[i].size<=0)var o=1;else o=t.boxes[i].size;var a=$('<div data-dashboard="item">').addClass("size-"+o).css("display","none");if(a.append('<div class="cu-box '+t.boxes[i].class+'"><div class="box-header"><span class="fa fa-caret-up box-handler"></span><h3 class="box-title">'+t.boxes[i].title+'</h3></div><div class="box-content">'+t.boxes[i].content+"</div></div>"),void 0!=t.boxes[i].container){var r=$(t.boxes[i].container);r.length>0&&$(r).each(function(){var e=a.clone();"top"==t.boxes[i].position?$(this).prepend(e):$(this).append(e),e.fadeIn("fast",function(){$('html.dashboard [data-container="dashboard"]').trigger("containerUpdated")})})}}}else n.html('<div class="text-danger"><span class="fa fa-exclamation-triangle"></span> '+cuLanguage.downloadNewsError+"</div>")},"json")}$("body").on("click",".ed-container .full-screen",function(){$(this).parents(".ed-container").addClass("full-screen-edit"),$(this).removeClass("full-screen").addClass("normal-screen"),t=$(this).parents(".ed-container").find(".txtarea-container").attr("style"),$(this).parents(".ed-container").find(".txtarea-container").attr("style",""),$("body").css("overflow","hidden")}),$("body").on("click",".ed-container .normal-screen",function(){$(this).parents(".ed-container").removeClass("full-screen-edit"),$(this).addClass("full-screen").removeClass("normal-screen"),$(this).parents(".ed-container").find(".txtarea-container").attr("style",t),t="",$("body").css("overflow","visible")}),$(".cu-notifications form .notification-item").change(function(){var t=$(this).data("event"),e=$(this).is(":checked")?1:0,o=$(this),n={event:t,status:e,page:"cu-notification-subscribe"};$.post(xoUrl+"/notifications.php",n,function(t){"error"!=t.type?$(o).parent().parent().animate({backgroundColor:"#ffff99"},500,"linear",function(){$(this).animate({backgroundColor:"transparent"},500,"linear")}):alert(t.message)},"json")}),$(" #cu-notifications .cancel-subscription").click(function(){var t=$(this).data("info"),e=$(this),o={event:t,status:0,page:"cu-notification-subscribe"};$.post(xoUrl+"/notifications.php",o,function(t){"error"!=t.type?$(e).parent().parent().slideUp(250,function(){$(this).remove()}):alert(t.message)},"json")})});